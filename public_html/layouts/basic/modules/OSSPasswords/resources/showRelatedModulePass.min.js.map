{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\nvar clipBoardInstances = [];\n$('.show_pass').on('click', function(e) {\n\tlet btn = $(this);\n\tlet record = btn.data('id');\n\tlet iconElement = btn.find('span');\n\tlet text = btn.data('title-copy');\n\tlet copyKey = `.copy_pass${record}`;\n\tlet copyBtn = $(`<button type=\"button\" id=\"copybtn_${record}\" data-id=\"pass_${record}\"\n\t\tclass=\"copy_pass${record} btn btn-light btn-sm mr-2 js-popover-tooltip\" data-content=\"${text}\" data-js=\"popover\"><span class=\"fas fa-download\"></span></button>`);\n\tlet element = $('[id=\"pass_' + record + '\"]');\n\tlet passVal = element.html();\n\tlet showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tlet hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\tif (clipBoardInstances[copyKey] === undefined) {\n\t\tlet clipboard = new ClipboardJS(copyKey, {\n\t\t\ttext: function(trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t\t\t}\n\t\t});\n\t\tclipBoardInstances[copyKey] = clipboard;\n\t}\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\tmodule: 'OSSPasswords',\n\t\t\taction: 'GetPass',\n\t\t\trecord: record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\telement.text(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function() {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t});\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption').addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopyBtn.insertBefore(btn);\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t} else {\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function() {\n\t\t\tthis.dataset.content = showPassText;\n\t\t});\n\t\tapp.showPopoverElementView(element);\n\t\ticonElement.removeClass('fas fa-lock').addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\t$(copyKey).remove();\n\t\tclipBoardInstances[copyKey].destroy();\n\t\tdelete clipBoardInstances[copyKey];\n\t}\n\treturn false;\n});\n"],"names":["$","on","record","btn","data","iconElement","find","text","copyKey","copyBtn","element","passVal","html","showPassText","app","vtranslate","hidePassText","clipBoardInstances","trigger","showPnotify","type","getAttribute","clipboard","jQuery","progressIndicator","position","blockInfo","enabled","AppConnector","request","module","action","done","response","dataset","content","removeClass","addClass","insertBefore","progressIndicatorElement","mode","showPopoverElementView","remove","destroy"],"mappings":";;AAAA;AAEA,AACA,uBAAyB,EAAzB,CACAA,EAAE,YAAF,EAAgBC,EAAhB,CAAmB,OAAnB,CAA4B,UAAY,SAC7BD,EAAE,IAAF,CAD6B,CAEnCE,OAASC,IAAIC,IAAJ,CAAS,IAAT,CAF0B,CAGnCC,YAAcF,IAAIG,IAAJ,CAAS,MAAT,CAHqB,CAInCC,KAAOJ,IAAIC,IAAJ,CAAS,YAAT,CAJ4B,CAKnCI,qBAAuBN,MALY,CAMnCO,QAAUT,uCAAuCE,MAAvC,oBAAgEA,MAAhE,2BACKA,MADL,iEAC2EK,IAD3E,sEANyB,CAQnCG,QAAUV,EAAE,aAAeE,MAAf,CAAwB,IAA1B,CARyB,CASnCS,QAAUD,QAAQE,IAAR,EATyB,CAUnCC,aAAeV,IAAIC,IAAJ,CAAS,WAAT,EAAwBD,IAAIC,IAAJ,CAAS,WAAT,CAAxB,CAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAV5B,CAWnCC,aAAeb,IAAIC,IAAJ,CAAS,WAAT,EAAwBD,IAAIC,IAAJ,CAAS,WAAT,CAAxB,CAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAX5B,CAavC,GAAIE,mBAAmBT,OAAnB,UAAJ,CAA+C,CAC9C,cAAgB,eAAA,CAAgBA,OAAhB,CAAyB,CACxCD,KAAM,SAASW,OAAT,CAAkB,CAKvB,wBAJiBC,WAAjB,CAA6B,CAC5BZ,KAAMO,IAAIC,UAAJ,CAAe,qBAAf,CADsB,CAE5BK,KAAM,SAFsB,CAA7B,CAIA,CAAOpB,EAAE,IAAMkB,QAAQG,YAAR,CAAqB,SAArB,CAAR,EAAyCd,IAAzC,EACP,CAPuC,CAAzB,CAAhB,CASAU,mBAAmBT,OAAnB,EAA8Bc,UAC9B,CACD,GAAe,YAAX,SAAJ,CAA6B,8BAMGC,OAAOC,iBAAP,CAAyB,CACvDC,SAAU,MAD6C,CAEvDC,UAAW,CACVC,UADU,CAF4C,CAAzB,CANH,CAY5BC,aAAaC,OAAb,CAXa,CACZC,OAAQ,cADI,CAEZC,OAAQ,SAFI,CAGZ7B,OAAQA,MAHI,CAWb,EAA6B8B,IAA7B,CAAkC,SAAS5B,IAAT,CAAe,CAChD,aAAeA,WAAf,CACI6B,gBAF4C,GAG/CvB,QAAQH,IAAR,CAAa0B,iBAAb,CAH+C,CAK/C9B,IAAIF,EAAJ,CAAO,iBAAP,CAA0B,UAAW,CACpC,KAAKiC,OAAL,CAAaC,OAAb,CAAuBnB,aACvB,CAFD,CAL+C,CAQ/CX,YAAY+B,WAAZ,CAAwB,gCAAxB,EAA0DC,QAA1D,CAAmE,aAAnE,CAR+C,CAU/C5B,QAAQ6B,YAAR,CAAqBnC,GAArB,CAV+C,EAYhDoC,yBAAyBf,iBAAzB,CAA2C,CAAEgB,KAAM,MAAR,CAA3C,EACA,CAbD,EAcA,CA1BD;;AA2BC9B,QAAQE,IAAR,CAAa,YAAb,CA3BD,CA6BCT,IAAIF,EAAJ,CAAO,iBAAP,CAA0B,UAAW,CACpC,KAAKiC,OAAL,CAAaC,OAAb,CAAuBtB,aACvB,CAFD,CA7BD,CAgCCC,IAAI2B,sBAAJ,CAA2B/B,OAA3B,CAhCD,CAiCCL,YAAY+B,WAAZ,CAAwB,aAAxB,EAAuCC,QAAvC,CAAgD,gCAAhD,CAjCD,CAmCCrC,EAAEQ,OAAF,EAAWkC,MAAX,EAnCD,CAoCCzB,mBAAmBT,OAAnB,EAA4BmC,OAA5B,EApCD,CAqCC,0BAA0BnC,OAAnB,CArCR,CAuCA,SACA,CAjED"}