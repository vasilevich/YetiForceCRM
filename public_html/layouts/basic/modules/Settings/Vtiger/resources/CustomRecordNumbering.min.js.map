{"version":3,"file":"CustomRecordNumbering.min.js","sources":["CustomRecordNumbering.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n$.Class('Settings_CustomRecordNumbering_Js', {}, {\n\n\tform: false,\n\tgetForm: function () {\n\t\tif (this.form == false) {\n\t\t\tthis.form = jQuery('#EditView');\n\t\t}\n\t\treturn this.form;\n\t},\n\n\t/**\n\t * Function to register change event for source module field\n\t */\n\tregisterOnChangeEventOfSourceModule() {\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\teditViewForm.find('[name=\"sourceModule\"]').on('change', function (e) {\n\t\t\t$('.saveButton').removeAttr('disabled');\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\tmode: 'getModuleCustomNumberingData',\n\t\t\t\tsourceModule: $(e.currentTarget).val()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\teditViewForm.find('[name=\"prefix\"]').val(data.result.prefix);\n\t\t\t\t\teditViewForm.find('[name=\"leading_zeros\"]').val(data.result.leading_zeros).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"reset_sequence\"]').val(data.result.reset_sequence).trigger('change');\n\t\t\t\t\teditViewForm.find('[name=\"postfix\"]').val(data.result.postfix);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').val(data.result.cur_id);\n\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').data('oldSequenceNumber', data.result.cur_id);\n\t\t\t\t\tlet options = '';\n\t\t\t\t\tfor (var index in data.result.picklists) {\n\t\t\t\t\t\toptions += '<option value=\"picklist:' + index + '\">' + data.result.picklists[index] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\teditViewForm.find('#picklistVariables').html(options)\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register event for saving module custom numbering\n\t */\n\tsaveModuleCustomNumbering() {\n\t\tif ($('.saveButton').attr(\"disabled\")) {\n\t\t\treturn;\n\t\t}\n\t\tconst editViewForm = this.getForm();\n\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]');\n\t\tconst leadingZeros = editViewForm.find('[name=\"leading_zeros\"]').val();\n\t\tconst currentPrefix = $.trim(prefix.val());\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]');\n\t\tconst currentPostfix = jQuery.trim(postfix.val());\n\t\tconst sequenceNumberElement = editViewForm.find('[name=\"sequenceNumber\"]');\n\t\tconst sequenceNumber = sequenceNumberElement.val();\n\t\tconst oldSequenceNumber = sequenceNumberElement.data('oldSequenceNumber');\n\t\tif ((sequenceNumber < oldSequenceNumber) && (currentPrefix === prefix.data('oldPrefix')) && (currentPostfix === postfix.data('oldPostfix'))) {\n\t\t\tsequenceNumberElement.validationEngine('showPrompt', app.vtranslate('JS_SEQUENCE_NUMBER_MESSAGE') + \" \" + oldSequenceNumber, 'error', 'topLeft', true);\n\t\t\treturn;\n\t\t}\n\t\teditViewForm.find('.saveButton').attr(\"disabled\", \"disabled\");\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\tmode: 'saveModuleCustomNumberingData',\n\t\t\tsourceModule: sourceModule,\n\t\t\tprefix: currentPrefix,\n\t\t\tleading_zeros: leadingZeros,\n\t\t\tpostfix: currentPostfix,\n\t\t\tsequenceNumber: sequenceNumber,\n\t\t\treset_sequence: editViewForm.find('[name=\"reset_sequence\"]').val(),\n\t\t}).done(function (data) {\n\t\t\tif (data.success === true) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: currentPrefix + \" \" + app.vtranslate(data.error.message),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to handle update record with the given sequence number\n\t */\n\tregisterEventToUpdateRecordsWithSequenceNumber() {\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('[name=\"updateRecordWithSequenceNumber\"]').on('click', function () {\n\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tAppConnector.request({\n\t\t\t\t'module': app.getModuleName(),\n\t\t\t\t'parent': app.getParentModuleName(),\n\t\t\t\t'action': \"CustomRecordNumberingAjax\",\n\t\t\t\t'mode': \"updateRecordsWithSequenceNumber\",\n\t\t\t\t'sourceModule': sourceModule\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_RECORD_NUMBERING_UPDATED_SUCCESSFULLY_FOR') + \" \" + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()});\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(data.error.message);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register change event for prefix,postfix,reset_sequence and sequence number\n\t */\n\tregisterChangeEvent() {\n\t\tthis.getForm().find('[name=\"prefix\"],[name=\"leading_zeros\"],[name=\"sequenceNumber\"],[name=\"postfix\"],[name=\"reset_sequence\"]').on('change', this.checkPrefix.bind(this))\n\t},\n\n\tregisterCopyClipboard: function (editViewForm) {\n\t\tnew ClipboardJS('#customVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#customVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t\tnew ClipboardJS('#picklistVariableCopy', {\n\t\t\ttext: function (trigger) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn '{{' + editViewForm.find('#picklistVariables').val() + '}}';\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Check if reset sequence appears in prefix or postfix to prevent duplicate number generation\n\t * @returns {boolean}\n\t */\n\tcheckPrefix() {\n\t\tlet sequenceExists = false;\n\t\tconst editViewForm = this.getForm();\n\t\tconst value = editViewForm.find('[name=\"reset_sequence\"]').val();\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tconst saveBtn = editViewForm.find('.saveButton');\n\t\tswitch (value) {\n\t\t\tcase 'Y':\n\t\t\t\tif (prefix.indexOf('{{YY}}') === -1 && prefix.indexOf('{{YYYY}}') === -1 && postfix.indexOf('{{YY}}') === -1 && postfix.indexOf('{{YYYY}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_YEAR_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'M':\n\t\t\t\tif (prefix.indexOf('{{MM}}') === -1 && prefix.indexOf('{{M}}') === -1 && postfix.indexOf('{{MM}}') === -1 && postfix.indexOf('{{M}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_MONTH_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'D':\n\t\t\t\tif (prefix.indexOf('{{DD}}') === -1 && prefix.indexOf('{{D}}') === -1 && postfix.indexOf('{{DD}}') === -1 && postfix.indexOf('{{D}}') === -1) {\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_DAY_VARIABLE')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'X':\n\t\t\tdefault:\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (sequenceExists) {\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\tif (regexResult && regexResult.length > 1) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_TOO_MANY')\n\t\t\t\t});\n\t\t\t\tsequenceExists = false;\n\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\tsequenceExists = true;\n\t\t\t}\n\t\t}\n\t\tthis.checkAdavancedSequenceBtn();\n\t\treturn sequenceExists;\n\t},\n\n\t/**\n\t * Function to enable button if prefix or postfix has picklist value\n\t */\n\tcheckAdavancedSequenceBtn: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\tif ((regexResult && regexResult.length > 1) || !regexResult) {\n\t\t\tsequenceBtn.addClass('d-none');\n\t\t} else {\n\t\t\tsequenceBtn.removeClass('d-none');\n\t\t}\n\t},\n\n\t/**\n\t * Function to register event on button\n\t */\n\tregisterAdavancedSequenceEvent: function(){\n\t\tconst editViewForm = this.getForm();\n\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\tsequenceBtn.on('click', function(){\n\t\t\tlet sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tlet picklistName = '';\n\t\t\tlet prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tlet postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tlet regex = new RegExp(\"{{picklist:([a-z0-9_]+)}}\", 'g');\n\t\t\tif ((prefix).match(regex)){\n\t\t\t\tpicklistName = prefix;\n\t\t\t} else if((postfix).match(regex)){\n\t\t\t\tpicklistName = postfix;\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CustomRecordNumberingAdvanced',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tpicklist: picklistName,\n\t\t\t}).done(function (data) {\n\t\t\t\tif(data){\n\t\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\t\tlet modalForm = container.find('form');\n\t\t\t\t\t\tmodalForm.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\tcontainer.on('click', '.js-modal__save', function(e) {\n\t\t\t\t\t\t\tif (modalForm.validationEngine('validate')){\n\t\t\t\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\t\t\t\t\tmode: 'saveModuleCustomNumberingAdvanceData',\n\t\t\t\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\t\t\t\tsequenceNumber: modalForm.find('.js-picklist-sequence').serializeFormData()\n\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') + ' ' + editViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to register events\n\t */\n\tregisterEvents: function () {\n\t\tconst thisInstance = this;\n\t\tconst editViewForm = this.getForm();\n\t\tthis.registerOnChangeEventOfSourceModule();\n\t\tthis.registerEventToUpdateRecordsWithSequenceNumber();\n\t\tthis.registerChangeEvent();\n\t\tthis.checkAdavancedSequenceBtn();\n\t\tthis.registerAdavancedSequenceEvent();\n\t\tlet params = app.validationEngineOptions;\n\t\tparams.onValidationComplete = function (editViewForm, valid) {\n\t\t\tif (valid) {\n\t\t\t\tthisInstance.saveModuleCustomNumbering();\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\teditViewForm.validationEngine('detach');\n\t\teditViewForm.validationEngine('attach', params);\n\t\tthis.registerCopyClipboard(editViewForm);\n\t}\n});\n$(document).ready(function () {\n\tlet customRecordNumberingInstance = new Settings_CustomRecordNumbering_Js();\n\tcustomRecordNumberingInstance.registerEvents();\n});\n"],"names":["$","Class","form","getForm","jQuery","registerOnChangeEventOfSourceModule","sequenceBtn","editViewForm","find","on","e","removeAttr","addClass","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","sourceModule","currentTarget","val","done","data","result","prefix","leading_zeros","trigger","reset_sequence","postfix","cur_id","picklists","options","index","html","saveModuleCustomNumbering","attr","leadingZeros","currentPrefix","trim","currentPostfix","sequenceNumberElement","sequenceNumber","oldSequenceNumber","validationEngine","vtranslate","success","Settings_Vtiger_Index_Js","showMessage","text","error","message","type","registerEventToUpdateRecordsWithSequenceNumber","registerChangeEvent","checkPrefix","bind","registerCopyClipboard","showPnotify","value","saveBtn","indexOf","Vtiger_Helper_Js","sequenceExists","regexResult","match","regex","length","checkAdavancedSequenceBtn","removeClass","registerAdavancedSequenceEvent","picklistName","view","picklist","showModalWindow","container","modalForm","validationEngineOptionsForRecord","progressIndicator","position","blockInfo","enabled","serializeFormData","progressIndicatorElement","hideModalWindow","registerEvents","validationEngineOptions","params","onValidationComplete","valid","thisInstance","document","ready","customRecordNumberingInstance"],"mappings":"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"}