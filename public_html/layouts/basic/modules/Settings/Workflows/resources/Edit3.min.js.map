{"version":3,"file":"Edit3.min.js","sources":["Edit3.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nSettings_Workflows_Edit_Js(\"Settings_Workflows_Edit3_Js\", {}, {\n\tstep3Container: false,\n\tadvanceFilterInstance: false,\n\tconditionBuilderInstance: false,\n\tckEditorInstance: false,\n\tfieldValueMap: false,\n\tinit: function () {\n\t\tthis.initialize();\n\t},\n\t/**\n\t * Function to get the container which holds all the reports step1 elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.step3Container;\n\t},\n\t/**\n\t * Function to set the reports step1 container\n\t * @params : element - which represents the reports step1 container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.step3Container = element;\n\t\treturn this;\n\t},\n\t/**\n\t * Function  to intialize the reports step1\n\t */\n\tinitialize: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = $('#workflow_step3');\n\t\t}\n\t\tif (container.is('#workflow_step3')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer($('#workflow_step3'));\n\t\t}\n\t},\n\tregisterEditTaskEvent: function () {\n\t\tlet thisInstance = this,\n\t\t\tcontainer = this.getContainer();\n\t\tcontainer.on('click', '[data-url]', function (e) {\n\t\t\tlet currentElement = $(e.currentTarget),\n\t\t\t\tparams = currentElement.data('url'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tapp.showModalWindow(null, params, function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ 'mode': 'hide' });\n\t\t\t\tif (data) {\n\t\t\t\t\tlet clipboard = App.Fields.Text.registerCopyClipboard(data);\n\t\t\t\t\tcontainer.one('hidden.bs.modal', () => {\n\t\t\t\t\t\tclipboard.destroy();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.registerVTCreateTodoTaskEvents();\n\t\t\t\tvar taskType = $('#taskType').val();\n\t\t\t\tvar functionName = 'register' + taskType + 'Events';\n\t\t\t\tif (typeof thisInstance[functionName] !== \"undefined\") {\n\t\t\t\t\tthisInstance[functionName].apply(thisInstance);\n\t\t\t\t}\n\t\t\t\tthisInstance.registerSaveTaskSubmitEvent(taskType);\n\t\t\t\t$('#saveTask').validationEngine(app.validationEngineOptions);\n\t\t\t\tthisInstance.registerFillTaskFieldsEvent();\n\t\t\t\tthisInstance.registerCheckSelectDateEvent();\n\t\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(data);\n\t\t\t\tthisInstance.conditionBuilderInstance = new Vtiger_ConditionBuilder_Js(data.find('.js-condition-builder'), data.find('.js-source-module').val());\n\t\t\t\tthisInstance.conditionBuilderInstance.registerEvents();\n\t\t\t});\n\n\t\t});\n\t},\n\tregisterCheckSelectDateEvent: function () {\n\t\t$('[name=\"check_select_date\"]').on('change', function (e) {\n\t\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\t\t$('#checkSelectDateContainer').removeClass('d-none').addClass('show');\n\t\t\t} else {\n\t\t\t\t$('#checkSelectDateContainer').removeClass('show').addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Register save task submit event\n\t * @param {string} taskType\n\t */\n\tregisterSaveTaskSubmitEvent(taskType) {\n\t\t$('#saveTask').on('submit', (e) => {\n\t\t\tlet form = $(e.currentTarget);\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tlet customValidationFunctionName = taskType + 'CustomValidation';\n\t\t\t\tif (typeof this[customValidationFunctionName] !== \"undefined\") {\n\t\t\t\t\tlet result = this[customValidationFunctionName].apply(this);\n\t\t\t\t\tif (result !== true) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: result,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet preSaveActionFunctionName = 'preSave' + taskType;\n\t\t\t\tif (typeof this[preSaveActionFunctionName] !== \"undefined\") {\n\t\t\t\t\tthis[preSaveActionFunctionName].apply(this, [taskType]);\n\t\t\t\t}\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tformData.entity_type = form.find('.createEntityModule:visible option:selected').val();\n\t\t\t\tAppConnector.request(formData).done((data) => {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tthis.getTaskList();\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\tVTUpdateFieldsTaskCustomValidation: function () {\n\t\treturn this.checkDuplicateFieldsSelected();\n\t},\n\tVTCreateEntityTaskCustomValidation: function () {\n\t\treturn this.checkDuplicateFieldsSelected();\n\t},\n\tcheckDuplicateFieldsSelected: function () {\n\t\tvar selectedFieldNames = $('#save_fieldvaluemapping').find('.js-conditions-row').find('[name=\"fieldname\"]');\n\t\tvar result = true;\n\t\tvar failureMessage = app.vtranslate('JS_SAME_FIELDS_SELECTED_MORE_THAN_ONCE');\n\t\t$.each(selectedFieldNames, function (i, ele) {\n\t\t\tvar fieldName = $(ele).attr(\"value\");\n\t\t\tvar fields = $(\"[name=\" + fieldName + \"]\").not(':hidden');\n\t\t\tif (fields.length > 1) {\n\t\t\t\tresult = failureMessage;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t},\n\tpreSaveVTUpdateFieldsTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveVTCreateEntityTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveVTEmailTask: function (tasktype) {\n\t\tvar textAreaElement = $('#content');\n\t\t//To keep the plain text value to the textarea which need to be\n\t\t//sent to server\n\t\ttextAreaElement.val(CKEDITOR.instances['content'].getData());\n\t},\n\tpreSaveVTUpdateRelatedFieldTask: function (tasktype) {\n\t\tvar values = this.getValues(tasktype);\n\t\t$('[name=\"field_value_mapping\"]').val(JSON.stringify(values));\n\t},\n\tpreSaveSumFieldFromDependent: function (tasktype) {\n\t\t$('[name=\"conditions\"]').val(JSON.stringify(this.conditionBuilderInstance.getConditions()));\n\t},\n\t/**\n\t * Function to check if the field selected is empty field\n\t * @params : select element which represents the field\n\t * @return : boolean true/false\n\t */\n\tisEmptyFieldSelected: function (fieldSelect) {\n\t\tvar selectedOption = fieldSelect.find('option:selected');\n\t\t//assumption that empty field will be having value none\n\t\tif (selectedOption.val() === 'none' || !selectedOption.val()) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tgetVTCreateEntityTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype', 'modulename');\n\t},\n\tgetVTUpdateFieldsTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype');\n\t},\n\tgetVTUpdateRelatedFieldTaskFieldList: function () {\n\t\treturn new Array('fieldname', 'value', 'valuetype');\n\t},\n\t/**\n\t * Get values\n\t * @param {string} tasktype\n\t * @returns {Array}\n\t */\n\tgetValues(tasktype) {\n\t\tlet fieldListFunctionName = 'get' + tasktype + 'FieldList',\n\t\t\tfieldList = [];\n\t\tif (typeof this[fieldListFunctionName] !== \"undefined\") {\n\t\t\tfieldList = this[fieldListFunctionName].apply()\n\t\t}\n\n\t\tlet values = [];\n\t\t$('.js-conditions-row', $('#save_fieldvaluemapping')).each((i, conditionDomElement) => {\n\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\tfieldSelectElement = $('[name=\"fieldname\"]', rowElement),\n\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t//To not send empty fields to server\n\t\t\tif (this.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet fieldDataInfo = fieldSelectElement.find('option:selected').data('fieldinfo'),\n\t\t\t\tfieldType = fieldDataInfo.type,\n\t\t\t\trowValues = {},\n\t\t\t\tkey,\n\t\t\t\tfield;\n\t\t\tif (fieldType === 'owner') {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field == 'value' && valueSelectElement.is('select')) {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.find('option:selected').val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (fieldType === 'picklist' || fieldType == 'multipicklist') {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\tfor (let j = 0; j < valuesArr.length; j++) {\n\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[j]] !== \"undefined\") {\n\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[j]]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('select') && fieldType == 'picklist') {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('select') && fieldType == 'multipicklist') {\n\t\t\t\t\t\tvar value = valueSelectElement.val();\n\t\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\tif (field == 'value') {\n\t\t\t\t\t\trowValues[field] = valueSelectElement.val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ($('[name=\"valuetype\"]', rowElement).val() == 'false' || ($('[name=\"valuetype\"]', rowElement).length == 0)) {\n\t\t\t\trowValues['valuetype'] = 'rawtext';\n\t\t\t}\n\n\t\t\tvalues.push(rowValues);\n\t\t});\n\t\treturn values;\n\t},\n\tgetTaskList: function () {\n\t\tvar container = this.getContainer();\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'TasksList',\n\t\t\trecord: $('[name=\"record\"]', container).val()\n\t\t}\n\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\t$('#taskListContainer').html(data);\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t},\n\t/**\n\t * Function to get ckEditorInstance\n\t */\n\tgetckEditorInstance: function () {\n\t\tif (this.ckEditorInstance === false) {\n\t\t\tthis.ckEditorInstance = new App.Fields.Text.Editor();\n\t\t}\n\t\treturn this.ckEditorInstance;\n\t},\n\tregisterTaskStatusChangeEvent: function () {\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('change', '.taskStatus', function (e) {\n\t\t\tvar currentStatusElement = $(e.currentTarget);\n\t\t\tvar url = currentStatusElement.data('statusurl');\n\t\t\tif (currentStatusElement.is(':checked')) {\n\t\t\t\turl = url + '&status=true';\n\t\t\t} else {\n\t\t\t\turl = url + '&status=false';\n\t\t\t}\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\tif (data.result == \"ok\") {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_STATUS_CHANGED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t}\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\t},\n\tregisterTaskDeleteEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.deleteTask', function (e) {\n\t\t\tvar message = app.vtranslate('LBL_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t'message': message\n\t\t\t}).done(function () {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tvar deleteUrl = currentElement.data('deleteurl');\n\t\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\t\tif (data.result == 'ok') {\n\t\t\t\t\t\tthisInstance.getTaskList();\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_TASK_DELETED_SUCCESSFULLY'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterFillTaskFromEmailFieldEvent: function () {\n\t\t$('#saveTask').on('change', '#fromEmailOption', function (e) {\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tvar inputElement = currentElement.closest('.row').find('.fields');\n\t\t\tinputElement.val(currentElement.val());\n\t\t})\n\t},\n\tregisterFillTaskFieldsEvent: function () {\n\t\t$('#saveTask').on('change', '.task-fields', function (e) {\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tvar inputElement = currentElement.closest('.row').find('.fields');\n\t\t\tvar oldValue = inputElement.val();\n\t\t\tvar newValue = oldValue + currentElement.val();\n\t\t\tinputElement.val(newValue);\n\t\t})\n\t},\n\tregisterFillMailContentEvent: function () {\n\t\t$('#task-fieldnames,#task_timefields,#task-templates').on('change', function (e) {\n\t\t\tvar textarea = CKEDITOR.instances.content;\n\t\t\tvar value = $(e.currentTarget).val();\n\t\t\tif (textarea != undefined) {\n\t\t\t\ttextarea.insertHtml(value);\n\t\t\t} else if ($('textarea[name=\"content\"]')) {\n\t\t\t\tvar textArea = $('textarea[name=\"content\"]');\n\t\t\t\ttextArea.insertAtCaret(value);\n\t\t\t}\n\t\t});\n\t},\n\tregisterVTEmailTaskEvents: function () {\n\t\tvar textAreaElement = $('#content');\n\t\tvar ckEditorInstance = this.getckEditorInstance();\n\t\tckEditorInstance.loadEditor(textAreaElement);\n\t\tthis.registerFillMailContentEvent();\n\t\tthis.registerFillTaskFromEmailFieldEvent();\n\t\tthis.registerCcAndBccEvents();\n\t},\n\tregisterVTCreateTodoTaskEvents: function () {\n\t\tapp.registerEventForClockPicker();\n\t},\n\tregisterVTUpdateFieldsTaskEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis.registerAddFieldEvent();\n\t\tthis.registerDeleteConditionEvent();\n\t\tthis.registerFieldChange();\n\t\tthis.fieldValueMap = false;\n\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\tthis.fieldValueReMapping();\n\t\t}\n\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t$.each(fields, function (i, field) {\n\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t});\n\t\tthis.getPopUp($('#saveTask'));\n\t},\n\tregisterVTUpdateRelatedFieldTaskEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis.registerAddFieldEvent();\n\t\tthis.registerDeleteConditionEvent();\n\t\tthis.registerFieldChange();\n\t\tthis.fieldValueMap = false;\n\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\tthis.fieldValueReMapping();\n\t\t}\n\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t$.each(fields, function (i, field) {\n\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t});\n\t\tthis.getPopUp($('#saveTask'));\n\t},\n\t/**\n\t * Add field\n\t * @param {jQuery|null} replaceElement - if we want to replace existing field container with new one\n\t */\n\taddField(replaceElement = null) {\n\t\tconst newAddFieldContainer = $('.js-add-basic-field-container').clone(true, true).removeClass('js-add-basic-field-container d-none').addClass('js-conditions-row');\n\t\t$('select', newAddFieldContainer).addClass('select2');\n\t\tif (replaceElement === null) {\n\t\t\t$('#save_fieldvaluemapping').append(newAddFieldContainer);\n\t\t} else {\n\t\t\treplaceElement.replaceWith(newAddFieldContainer);\n\t\t}\n\t\t//change in to select elements\n\t\tApp.Fields.Picklist.changeSelectElementView(newAddFieldContainer);\n\t},\n\t/**\n\t * Register add field event\n\t */\n\tregisterAddFieldEvent() {\n\t\t$('#addFieldBtn').on('click', (e) => {\n\t\t\tthis.addField();\n\t\t});\n\t},\n\tregisterDeleteConditionEvent() {\n\t\t$('#saveTask').on('click', '.js-condition-delete', (e) => {\n\t\t\t$(e.currentTarget).closest('.js-conditions-row').remove();\n\t\t});\n\t},\n\t/**\n\t * Function which will register field change event\n\t */\n\tregisterFieldChange() {\n\t\t$('#saveTask').on('change', 'select[name=\"fieldname\"]', (e) => {\n\t\t\tconst selectedElement = $(e.currentTarget);\n\t\t\tconst conditionRow = selectedElement.closest('.js-conditions-row');\n\t\t\tif (selectedElement.val() !== 'none' && selectedElement.val()) {\n\t\t\t\tvar moduleNameElement = conditionRow.find('[name=\"modulename\"]');\n\t\t\t\tif (moduleNameElement.length > 0) {\n\t\t\t\t\tvar selectedOptionFieldInfo = selectedElement.find('option:selected').data('fieldinfo');\n\t\t\t\t\tvar type = selectedOptionFieldInfo.type;\n\t\t\t\t\tif (type == 'picklist' || type == 'multipicklist') {\n\t\t\t\t\t\tvar selectElement = $('select.createEntityModule:not(:disabled)');\n\t\t\t\t\t\tvar moduleName = selectElement.val();\n\t\t\t\t\t\tmoduleNameElement.val(moduleName).change().prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.loadFieldSpecificUi(selectedElement);\n\t\t\t} else {\n\t\t\t\tthis.addField(conditionRow);\n\t\t\t}\n\t\t});\n\t},\n\tgetModuleName: function () {\n\t\treturn app.getModuleName();\n\t},\n\tgetFieldValueMapping: function () {\n\t\tvar fieldValueMap = this.fieldValueMap;\n\t\tif (fieldValueMap != false) {\n\t\t\treturn fieldValueMap;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\tfieldValueReMapping: function () {\n\t\tvar object = JSON.parse($('#fieldValueMapping').val());\n\t\tvar fieldValueReMap = {};\n\n\t\t$.each(object, function (i, array) {\n\t\t\tfieldValueReMap[array.fieldname] = {};\n\t\t\tvar values = {}\n\t\t\t$.each(array, function (key, value) {\n\t\t\t\tvalues[key] = value;\n\t\t\t});\n\t\t\tfieldValueReMap[array.fieldname] = values\n\t\t});\n\t\tthis.fieldValueMap = fieldValueReMap;\n\t},\n\t/**\n\t * Load field specific UI\n\t * @param {jQuery} fieldSelect\n\t * @returns this\n\t */\n\tloadFieldSpecificUi(fieldSelect) {\n\t\tconst selectedOption = fieldSelect.find('option:selected');\n\t\tconst row = fieldSelect.closest('div.js-conditions-row');\n\t\tconst fieldUiHolder = row.find('.fieldUiHolder');\n\t\tconst fieldInfo = selectedOption.data('fieldinfo');\n\t\tconst fieldValueMapping = this.getFieldValueMapping();\n\t\tlet selectField = '';\n\t\tif (fieldValueMapping && typeof fieldValueMapping[fieldInfo.name] !== \"undefined\") {\n\t\t\tselectField = fieldValueMapping[fieldInfo.name];\n\t\t} else if (fieldValueMapping && typeof fieldValueMapping[fieldSelect.val()] !== \"undefined\") {\n\t\t\tselectField = fieldValueMapping[fieldSelect.val()];\n\t\t}\n\t\tif (selectField) {\n\t\t\tfieldInfo.value = selectField['value'];\n\t\t\tfieldInfo.workflow_valuetype = selectField['valuetype'];\n\t\t} else {\n\t\t\tfieldInfo.workflow_valuetype = 'rawtext';\n\t\t}\n\t\tconst moduleName = this.getModuleName();\n\t\tconst fieldModel = Vtiger_Field_Js.getInstance(fieldInfo, moduleName);\n\t\tthis.fieldModelInstance = fieldModel;\n\t\tconst fieldSpecificUi = this.getFieldSpecificUi(fieldSelect);\n\t\t//remove validation since we dont need validations for all eleements\n\t\t// Both filter and find is used since we dont know whether the element is enclosed in some conainer like currency\n\t\tlet fieldName = fieldModel.getName();\n\t\tif (fieldModel.getType() == 'multipicklist') {\n\t\t\tfieldName = fieldName + \"[]\";\n\t\t}\n\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').attr('data-value', 'value');\n\t\tfieldSpecificUi.find('[name=\"' + fieldName + '\"]').attr('data-value', 'value');\n\t\tfieldSpecificUi.filter('[name=\"valuetype\"]').removeAttr('data-validation-engine');\n\t\tfieldSpecificUi.find('[name=\"valuetype\"]').removeAttr('data-validation-engine');\n\t\t//If the workflowValueType is rawtext then only validation should happen\n\t\tconst workflowValueType = fieldSpecificUi.filter('[name=\"valuetype\"]').val();\n\t\tif (workflowValueType != 'rawtext' && typeof workflowValueType !== \"undefined\") {\n\t\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').removeAttr('data-validation-engine');\n\t\t\tfieldSpecificUi.find('[name=\"' + fieldName + '\"]').removeAttr('data-validation-engine');\n\t\t}\n\t\tfieldUiHolder.html(fieldSpecificUi);\n\t\tif (fieldSpecificUi.is('input.select2') || fieldSpecificUi.is('select')) {\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(fieldSpecificUi);\n\t\t} else if (fieldSpecificUi.is('input.dateField')) {\n\t\t\tApp.Fields.Date.register(fieldSpecificUi);\n\t\t} else if (fieldSpecificUi.is('input.dateRangeField')) {\n\t\t\tApp.Fields.Date.registerRange(fieldSpecificUi, { ranges: false });\n\t\t}\n\t\treturn this;\n\t},\n\t/**\n\t * Functiont to get the field specific ui for the selected field\n\t * @prarms : fieldSelectElement - select element which will represents field list\n\t * @return : jquery object which represents the ui for the field\n\t */\n\tgetFieldSpecificUi: function (fieldSelectElement) {\n\t\tvar fieldModel = this.fieldModelInstance;\n\t\treturn $(fieldModel.getUiTypeSpecificHtml())\n\t},\n\tregisterVTCreateEventTaskEvents: function () {\n\t\tapp.registerEventForClockPicker();\n\t},\n\tregisterVTCreateEntityTaskEvents: function () {\n\t\tthis.registerChangeCreateEntityEvent();\n\t\tthis.registerVTUpdateFieldsTaskEvents();\n\t},\n\tregisterChangeCreateEntityEvent: function () {\n\t\tvar thisInstance = this;\n\t\t$('[name=\"mappingPanel\"]').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tapp.setMainParams('mappingPanel', currentTarget.val())\n\t\t\t$('#addCreateEntityContainer').html('');\n\t\t\tvar hideElementByClass = $('.' + currentTarget.data('hide'));\n\t\t\tvar showElementByClass = $('.' + currentTarget.data('show'));\n\t\t\tvar taskFields = app.getMainParams('taskFields', true);\n\t\t\thideElementByClass.addClass('d-none').find('input,select').each(function (e, n) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar name = element.attr('name');\n\t\t\t\tif ($.inArray(name, taskFields) >= 0) {\n\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\telement.val('').trigger('change');\n\t\t\t\t\t}\n\t\t\t\t\telement.prop('disabled', true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tshowElementByClass.removeClass('d-none').find('input,select').each(function (e, n) {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar name = element.attr('name');\n\t\t\t\tif ($.inArray(name, taskFields) >= 0) {\n\t\t\t\t\telement.prop('disabled', false);\n\t\t\t\t\tif (element.is('select')) {\n\t\t\t\t\t\telement.val('').trigger('change');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t$('.createEntityModule').on('change', function (e) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CreateEntity',\n\t\t\t\tfor_workflow: $('[name=\"for_workflow\"]').val(),\n\t\t\t\tmappingPanel: app.getMainParams('mappingPanel')\n\t\t\t}\n\t\t\tvar relatedModule = $(e.currentTarget).val();\n\t\t\tif (relatedModule) {\n\t\t\t\tparams['relatedModule'] = relatedModule;\n\t\t\t}\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ 'mode': 'hide' })\n\t\t\t\tvar createEntityContainer = $('#addCreateEntityContainer');\n\t\t\t\tcreateEntityContainer.html(data);\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(createEntityContainer);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(createEntityContainer.find('.select2'));\n\t\t\t\tthisInstance.registerAddFieldEvent();\n\t\t\t\tthisInstance.fieldValueMap = false;\n\t\t\t\tif ($('#fieldValueMapping').val() != '') {\n\t\t\t\t\tthis.fieldValueReMapping();\n\t\t\t\t}\n\t\t\t\tvar fields = $('#save_fieldvaluemapping').find('select[name=\"fieldname\"]');\n\t\t\t\t$.each(fields, function (i, field) {\n\t\t\t\t\tthisInstance.loadFieldSpecificUi($(field));\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Function which will change the UI styles based on recurring type\n\t * @params - recurringType - which recurringtype is selected\n\t */\n\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\tif (recurringType == 'Daily' || recurringType == 'Yearly') {\n\t\t\t$('#repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t$('#repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'Weekly') {\n\t\t\t$('#repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\t$('#repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'Monthly') {\n\t\t\t$('#repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t$('#repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t}\n\t},\n\tcheckHiddenStatusofCcandBcc: function () {\n\t\tvar ccLink = $('#ccLink');\n\t\tvar bccLink = $('#bccLink');\n\t\tif (ccLink.hasClass('d-none') && bccLink.hasClass('d-none')) {\n\t\t\tccLink.closest('div.row').addClass('d-none');\n\t\t}\n\t},\n\t/*\n\t * Function to register the events for bcc and cc links\n\t */\n\tregisterCcAndBccEvents: function () {\n\t\tvar thisInstance = this;\n\t\t$('#ccLink').on('click', function (e) {\n\t\t\tvar ccContainer = $('#ccContainer');\n\t\t\tccContainer.removeClass('d-none');\n\t\t\tvar taskFieldElement = ccContainer.find('select.task-fields');\n\t\t\ttaskFieldElement.addClass('select2');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(taskFieldElement);\n\t\t\t$(e.currentTarget).addClass('d-none');\n\t\t\tthisInstance.checkHiddenStatusofCcandBcc();\n\t\t});\n\t\t$('#bccLink').on('click', function (e) {\n\t\t\tvar bccContainer = $('#bccContainer');\n\t\t\tbccContainer.removeClass('d-none');\n\t\t\tvar taskFieldElement = bccContainer.find('select.task-fields');\n\t\t\ttaskFieldElement.addClass('select2');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(taskFieldElement);\n\t\t\t$(e.currentTarget).addClass('d-none');\n\t\t\tthisInstance.checkHiddenStatusofCcandBcc();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar container = this.getContainer();\n\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\tthis.registerEditTaskEvent();\n\t\tthis.registerTaskStatusChangeEvent();\n\t\tthis.registerTaskDeleteEvent();\n\t}\n});\n\n//http://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery\n$.fn.extend({\n\tinsertAtCaret: function (myValue) {\n\t\treturn this.each(function (i) {\n\t\t\tif (document.selection) {\n\t\t\t\t//For browsers like Internet Explorer\n\t\t\t\tthis.focus();\n\t\t\t\tvar sel = document.selection.createRange();\n\t\t\t\tsel.text = myValue;\n\t\t\t\tthis.focus();\n\t\t\t} else if (this.selectionStart || this.selectionStart == '0') {\n\t\t\t\t//For browsers like Firefox and Webkit based\n\t\t\t\tvar startPos = this.selectionStart;\n\t\t\t\tvar endPos = this.selectionEnd;\n\t\t\t\tvar scrollTop = this.scrollTop;\n\t\t\t\tthis.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);\n\t\t\t\tthis.focus();\n\t\t\t\tthis.selectionStart = startPos + myValue.length;\n\t\t\t\tthis.selectionEnd = startPos + myValue.length;\n\t\t\t\tthis.scrollTop = scrollTop;\n\t\t\t} else {\n\t\t\t\tthis.value += myValue;\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t});\n\t}\n});\n"],"names":["Settings_Workflows_Edit_Js","step3Container","advanceFilterInstance","conditionBuilderInstance","ckEditorInstance","fieldValueMap","init","initialize","getContainer","setContainer","element","container","$","is","registerEditTaskEvent","on","e","currentTarget","params","currentElement","data","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","app","showModalWindow","App","Fields","Text","registerCopyClipboard","one","clipboard","destroy","thisInstance","registerVTCreateTodoTaskEvents","val","functionName","taskType","apply","registerSaveTaskSubmitEvent","validationEngine","validationEngineOptions","registerFillTaskFieldsEvent","registerCheckSelectDateEvent","Tools","VariablesPanel","registerRefreshCompanyVariables","find","registerEvents","removeClass","addClass","customValidationFunctionName","showPnotify","title","vtranslate","text","result","type","preventDefault","preSaveActionFunctionName","form","serializeFormData","formData","entity_type","AppConnector","request","done","getTaskList","hideModalWindow","VTUpdateFieldsTaskCustomValidation","checkDuplicateFieldsSelected","VTCreateEntityTaskCustomValidation","failureMessage","each","selectedFieldNames","i","ele","attr","fields","fieldName","not","length","preSaveVTUpdateFieldsTask","tasktype","getValues","JSON","stringify","values","preSaveVTCreateEntityTask","preSaveVTEmailTask","textAreaElement","CKEDITOR","instances","getData","preSaveVTUpdateRelatedFieldTask","preSaveSumFieldFromDependent","getConditions","isEmptyFieldSelected","fieldSelect","selectedOption","getVTCreateEntityTaskFieldList","getVTUpdateFieldsTaskFieldList","getVTUpdateRelatedFieldTaskFieldList","fieldListFunctionName","fieldList","conditionDomElement","fieldSelectElement","rowElement","valueSelectElement","field","fieldDataInfo","fieldType","rowValues","key","valuesArr","split","newValuesArr","j","push","pickListValues","join","value","module","getModuleName","parent","getParentModuleName","view","record","html","mode","getckEditorInstance","Editor","registerTaskStatusChangeEvent","url","currentStatusElement","Vtiger_Helper_Js","stopImmediatePropagation","registerTaskDeleteEvent","showConfirmationBox","message","deleteUrl","registerFillTaskFromEmailFieldEvent","inputElement","closest","oldValue","newValue","registerFillMailContentEvent","content","textarea","insertHtml","textArea","insertAtCaret","registerVTEmailTaskEvents","loadEditor","registerCcAndBccEvents","registerEventForClockPicker","registerVTUpdateFieldsTaskEvents","registerAddFieldEvent","registerDeleteConditionEvent","registerFieldChange","fieldValueReMapping","loadFieldSpecificUi","getPopUp","registerVTUpdateRelatedFieldTaskEvents","addField","newAddFieldContainer","clone","append","replaceElement","replaceWith","Picklist","changeSelectElementView","remove","conditionRow","selectedElement","selectedOptionFieldInfo","moduleName","selectElement","moduleNameElement","change","prop","getFieldValueMapping","parse","fieldValueReMap","object","array","fieldname","row","fieldUiHolder","fieldInfo","fieldValueMapping","selectField","name","workflow_valuetype","fieldModel","Vtiger_Field_Js","getInstance","fieldModelInstance","getFieldSpecificUi","getName","getType","fieldSpecificUi","filter","removeAttr","showSelect2ElementView","Date","register","registerRange","ranges","getUiTypeSpecificHtml","registerVTCreateEventTaskEvents","registerVTCreateEntityTaskEvents","registerChangeCreateEntityEvent","setMainParams","showElementByClass","taskFields","getMainParams","hideElementByClass","inArray","trigger","for_workflow","mappingPanel","relatedModule","createEntityContainer","changeRecurringTypesUIStyles","recurringType","checkHiddenStatusofCcandBcc","bccLink","ccLink","hasClass","ccContainer","taskFieldElement","bccContainer","fn","extend","myValue","document","selection","focus","createRange","sel","selectionStart","endPos","selectionEnd","scrollTop","substring","startPos"],"mappings":"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"}