{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js('Settings_Groups_Edit_Js', {}, {\n\tmemberSelectElement: false,\n\n\tgetMemberSelectElement: function () {\n\t\tif (this.memberSelectElement == false) {\n\t\t\tthis.memberSelectElement = jQuery('#memberList');\n\t\t}\n\t\treturn this.memberSelectElement;\n\t},\n\t/**\n\t * Function to register form for validation\n\t */\n\tregisterFormForValidation: function () {\n\t\tvar editViewForm = this.getForm();\n\t\teditViewForm.validationEngine(app.getvalidationEngineOptions(true));\n\t},\n\n\t/**\n\t * Function to register the submit event of form\n\t */\n\tregisterSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = jQuery('#EditView');\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tthisInstance.checkDuplicateName({\n\t\t\t\t\t\t'groupname': formData.groupname,\n\t\t\t\t\t\t'record': formData.record\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\t/*\n\t * Function to check Duplication of Group Names\n\t * returns boolean true or false\n\t */\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar params = {\n\t\t\t'module': app.getModuleName(),\n\t\t\t'parent': app.getParentModuleName(),\n\t\t\t'action': 'EditAjax',\n\t\t\t'mode': 'checkDuplicate',\n\t\t\t'groupname': details.groupname,\n\t\t\t'record': details.record\n\t\t}\n\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tvar result = response['success'];\n\t\t\tif (result == true) {\n\t\t\t\taDeferred.reject(response);\n\t\t\t} else {\n\t\t\t\taDeferred.resolve(response);\n\t\t\t}\n\t\t}).fail(function (error, err) {\n\t\t\taDeferred.reject(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register events for section \"modules\"\n\t */\n\tregisterButtonsModule: function(){\n\t\tconst editViewForm = this.getForm();\n\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function(e){\n\t\t\t$('#modulesList option').prop('selected', $(this).hasClass('js-modules-select-all')).parent().trigger('change');\n\t\t});\n\t},\n\t/**\n\t * Function which will handle the registrations for the elements\n\t */\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerSubmitEvent();\n\t\tthis.registerButtonsModule()\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","memberSelectElement","getMemberSelectElement","jQuery","registerFormForValidation","getForm","editViewForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","form","on","e","data","InvalidFields","length","serializeFormData","thisInstance","checkDuplicateName","formData","groupname","record","done","submit","fail","params","Settings_Vtiger_Index_Js","showMessage","removeData","formAlignmentAfterValidation","preventDefault","details","Deferred","getModuleName","getParentModuleName","request","result","response","aDeferred","reject","resolve","error","err","promise","registerButtonsModule","find","$","prop","hasClass","parent","trigger","registerEvents","_super"],"mappings":";;AAUAA,wBAAwB,yBAAxB,CAAmD,EAAnD,CAAuD,CACtDC,sBADsD,CAGtDC,uBAAwB,iCAAY,CAInC,OAHI,SAAKD,mBAGT,GAFC,KAAKA,mBAAL,CAA2BE,OAAO,aAAP,CAE5B,EAAO,KAAKF,mBACZ,CARqD;;IAYtDG,0BAA2B,oCAAY,CACtC,iBAAmB,KAAKC,OAAL,EAAnB,CACAC,aAAaC,gBAAb,CAA8BC,IAAIC,0BAAJ,IAA9B,EACA,CAfqD;;IAoBtDC,oBAAqB,8BAAY,kBACb,IADa,CAE5BC,KAAOR,OAAO,WAAP,CAFqB,CAGhCQ,KAAKC,EAAL,CAAQ,QAAR,CAAkB,SAAUC,CAAV,CAAa,CAC9B,GAA2B,MAAvB,OAAKC,IAAL,CAAU,QAAV,GAA8D,MAA7B,OAAKA,IAAL,CAAU,cAAV,CAArC,CACC,UAEA,GAA6C,CAAzC,OAAKA,IAAL,CAAU,KAAV,EAAiBC,aAAjB,CAA+BC,MAAnC,CAAgD,CAC/C,aAAeL,KAAKM,iBAAL,EAAf,CACAC,aAAaC,kBAAb,CAAgC,CAC/B,UAAaC,SAASC,SADS,CAE/B,OAAUD,SAASE,MAFY,CAAhC,EAGGC,IAHH,CAGQ,UAAgB,CACvBZ,KAAKG,IAAL,CAAU,QAAV,CAAoB,MAApB,CADuB,CAEvBH,KAAKG,IAAL,CAAU,cAAV,CAA0B,MAA1B,CAFuB,CAGvBH,KAAKa,MAAL,GACA,CAPD,EAOGC,IAPH,CAOQ,SAAUX,IAAV,CAAqB,CAC5B,WAAa,EAAb,CAIA,mBAHiBA,YAGjB,CAFAY,YAAiB,OAEjB,CADAC,yBAAyBC,WAAzB,CAAqCF,MAArC,CACA,GACA,CAbD,EAcA,CAhBD;AAkBCf,KAAKkB,UAAL,CAAgB,QAAhB,CAlBD,CAmBCrB,IAAIsB,4BAAJ,CAAiCnB,IAAjC,CAnBD,CAqBAE,EAAEkB,cAAF,GAED,CA3BD,EA4BA,CAnDqD;;;IAyDtDZ,mBAAoB,4BAAUa,OAAV,CAAmB,eACtB7B,OAAO8B,QAAP,EADsB,CAGlCP,OAAS,CACZ,OAAUlB,IAAI0B,aAAJ,EADE,CAEZ,OAAU1B,IAAI2B,mBAAJ,EAFE,CAGZ,OAAU,UAHE,CAIZ,KAAQ,gBAJI,CAKZ,UAAaH,QAAQX,SALT,CAMZ,OAAUW,QAAQV,MANN,CAHyB,CAuBtC,oBAXac,OAAb,CAAqBV,MAArB,EAA6BH,IAA7B,CAAkC,SAAUT,IAAV,CAAgB,cAClCA,WADkC,CAE7CuB,OAASC,gBAFoC,CAG7C,UAH6C,CAIhDC,UAAUC,MAAV,CAAiBF,QAAjB,CAJgD,CAMhDC,UAAUE,OAAV,CAAkBH,QAAlB,EAED,CARD,EAQGb,IARH,CAQQ,SAAUiB,KAAV,CAAiBC,GAAjB,CAAsB,CAC7BJ,UAAUC,MAAV,CAAiBE,KAAjB,CAAwBC,GAAxB,EACA,CAVD,CAWA,CAAOJ,UAAUK,OAAV,EACP,CAjFqD;;IAqFtDC,sBAAuB,gCAAU,CAChC,iBAAqB,KAAKxC,OAAL,EAArB,CACAC,aAAawC,IAAb,CAAkB,kDAAlB,EAAsElC,EAAtE,CAAyE,OAAzE,CAAkF,UAAW,CAC5FmC,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,UAA9B,CAA0CD,EAAE,IAAF,EAAQE,QAAR,CAAiB,uBAAjB,CAA1C,EAAqFC,MAArF,GAA8FC,OAA9F,CAAsG,QAAtG,EACA,CAFD,EAGA,CA1FqD;;IA8FtDC,eAAgB,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAK3C,mBAAL,EAF2B,CAG3B,KAAKmC,qBAAL,GACA,CAlGqD,CAAvD"}