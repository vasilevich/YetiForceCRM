{"version":3,"file":"SharingAccess.min.js","sources":["SharingAccess.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Sharing_Access_Js',\n\t{},\n\t{\n\t\tcontentTable: false,\n\t\tcontentsContainer: false,\n\n\t\tinit: function() {\n\t\t\tthis.setContentTable('.sharingAccessDetails').setContentContainer('#sharingAccessContainer');\n\t\t},\n\n\t\tsetContentTable: function(element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentTable = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentTable = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tsetContentContainer: function(element) {\n\t\t\tif (element instanceof jQuery) {\n\t\t\t\tthis.contentsContainer = element;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis.contentsContainer = jQuery(element);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetContentTable: function() {\n\t\t\treturn this.contentTable;\n\t\t},\n\n\t\tgetContentContainer: function() {\n\t\t\treturn this.contentsContainer;\n\t\t},\n\n\t\tgetCustomRuleContainerClassName: function(parentModuleName) {\n\t\t\treturn 'js-' + parentModuleName + '-custom-rule-list';\n\t\t},\n\n\t\tshowCustomRulesNextToElement: function(parentElement, rulesListElement) {\n\t\t\tvar moduleName = parentElement.data('moduleName');\n\t\t\tvar trElementForRuleList = jQuery(\n\t\t\t\t'<tr class=\"' +\n\t\t\t\t\tthis.getCustomRuleContainerClassName(moduleName) +\n\t\t\t\t\t'\"><td class=\"js-custom-rule-container\" data-js=\"container\" colspan=\"6\"></td></tr>'\n\t\t\t);\n\t\t\tjQuery('td', trElementForRuleList).append(rulesListElement);\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).css('display', 'none');\n\t\t\tparentElement.after(trElementForRuleList).addClass('collapseRow');\n\t\t\tjQuery('.ruleListContainer', trElementForRuleList).slideDown('slow');\n\t\t},\n\n\t\t/*\n\t\t * function to get custom rules data based on the module\n\t\t * @params: forModule.\n\t\t */\n\t\tgetCustomRules: function(forModule) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar params = {};\n\t\t\tparams['for_module'] = forModule;\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'IndexAjax';\n\t\t\tparams['mode'] = 'showRules';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\tsave: function(data) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tAppConnector.request(data)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, errorThrown) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * function to Save the Custom Rule\n\t\t */\n\t\tsaveCustomRule: function(form, e) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet data = form.serializeFormData();\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.module = app.getModuleName();\n\t\t\tdata.parent = app.getParentModuleName();\n\t\t\tdata.action = 'IndexAjax';\n\t\t\tdata.mode = 'saveRule';\n\t\t\tAppConnector.request(data).done(function(data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet response = data.result;\n\t\t\t\tif (response && response.success) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tlet moduleName = $('[name=\"for_module\"]', form).val();\n\t\t\t\t\tthisInstance.loadCustomRulesList(moduleName);\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttext: response.message\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to load the CustomRules List for the module after save the custom rule\n\t\t */\n\t\tloadCustomRulesList: function(moduleName) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contentTable = this.getContentTable();\n\n\t\t\tthisInstance.getCustomRules(moduleName).done(function(data) {\n\t\t\t\tvar customRuleListContainer = jQuery(\n\t\t\t\t\t'.' + thisInstance.getCustomRuleContainerClassName(moduleName),\n\t\t\t\t\tcontentTable\n\t\t\t\t);\n\t\t\t\tcustomRuleListContainer.find('td.js-custom-rule-container').html(data);\n\t\t\t});\n\t\t},\n\n\t\teditCustomRule: function(url) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.showModalWindow(null, url, function(modalContainer) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tvar form = modalContainer.find('.js-edit-rule-form');\n\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t//To stop the submit of form\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar formElement = $(e.currentTarget);\n\t\t\t\t\tthisInstance.saveCustomRule(formElement, e);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to delete Custom Rule from the list\n\t\t * @params: deleteElement.\n\t\t */\n\t\tdeleteCustomRule: function(deleteElement) {\n\t\t\tvar deleteUrl = deleteElement.data('url');\n\t\t\tvar currentRow = deleteElement.closest('.js-custom-rule-entries');\n\t\t\tvar message = app.vtranslate('LBL_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function(data) {\n\t\t\t\tAppConnector.request(deleteUrl).done(function(data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response && response.success) {\n\t\t\t\t\t\tcurrentRow.fadeOut('slow');\n\t\t\t\t\t\tvar customRuleTable = currentRow.closest('.js-custom-rule-table');\n\t\t\t\t\t\t//after delete the custom rule, update the sequence number of existing rules\n\t\t\t\t\t\tvar nextRows = currentRow.nextAll('js-custom-rule-entries');\n\t\t\t\t\t\tif (nextRows.length > 0) {\n\t\t\t\t\t\t\tjQuery.each(nextRows, function(i, element) {\n\t\t\t\t\t\t\t\tvar currentSequenceElement = jQuery(element).find('.js-sequence-number');\n\t\t\t\t\t\t\t\tvar updatedNumber = parseInt(currentSequenceElement.text()) - 1;\n\t\t\t\t\t\t\t\tcurrentSequenceElement.text(updatedNumber);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentRow.remove();\n\t\t\t\t\t\tvar customRuleEntries = customRuleTable.find('.js-custom-rule-entries');\n\t\t\t\t\t\t//if there are no custom rule entries, we have to hide headers also and show the empty message div\n\t\t\t\t\t\tif (customRuleEntries.length < 1) {\n\t\t\t\t\t\t\tcustomRuleTable\n\t\t\t\t\t\t\t\t.find('.js-custom-rule-headers')\n\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\tcustomRuleTable\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.find('.js-record-details')\n\t\t\t\t\t\t\t\t.removeClass('d-none');\n\t\t\t\t\t\t\tcustomRuleTable.addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: 'JS_ERROR'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to register click event for radio buttons\n\t\t */\n\t\tregisterSharingAccessEdit: function() {\n\t\t\tvar contentContainer = this.getContentContainer();\n\t\t\tcontentContainer.one('click', 'input:radio', function(e) {\n\t\t\t\tcontentContainer.find('button:submit').removeClass('d-none');\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to register change event for dependent modules privileges\n\t\t */\n\t\tregisterDependentModulesPrivilegesChange: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getContentContainer();\n\t\t\tvar contentTable = this.getContentTable();\n\t\t\tvar modulesList = JSON.parse(container.find('.dependentModules').val());\n\n\t\t\tjQuery.each(modulesList, function(moduleName, dependentList) {\n\t\t\t\tvar dependentPrivilege = contentTable\n\t\t\t\t\t.find('[data-module-name=\"' + moduleName + '\"]')\n\t\t\t\t\t.find('[data-action-state=\"Private\"]');\n\t\t\t\tdependentPrivilege.on('change', function(e) {\n\t\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tvar message = app.vtranslate('JS_DEPENDENT_PRIVILEGES_SHOULD_CHANGE');\n\t\t\t\t\t\tbootbox.alert(message);\n\t\t\t\t\t\tjQuery.each(dependentList, function(index, module) {\n\t\t\t\t\t\t\tcontentTable\n\t\t\t\t\t\t\t\t.find('[data-module-name=\"' + module + '\"]')\n\t\t\t\t\t\t\t\t.find('[data-action-state=\"Private\"]')\n\t\t\t\t\t\t\t\t.attr('checked', 'checked');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet contentTable = thisInstance.getContentTable(),\n\t\t\t\tcontentContainer = thisInstance.getContentContainer();\n\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\tthisInstance.registerDependentModulesPrivilegesChange();\n\t\t\tcontentTable.on('click', 'td.triggerCustomSharingAccess', function(e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\ttrElement = element.closest('tr'),\n\t\t\t\t\tmoduleName = trElement.data('moduleName'),\n\t\t\t\t\tcustomRuleListContainer = $(\n\t\t\t\t\t\t'.' + thisInstance.getCustomRuleContainerClassName(moduleName),\n\t\t\t\t\t\tcontentTable\n\t\t\t\t\t);\n\t\t\t\tif (customRuleListContainer.length > 0) {\n\t\t\t\t\tif (app.isHidden(customRuleListContainer)) {\n\t\t\t\t\t\tcustomRuleListContainer.show();\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideDown('slow');\n\t\t\t\t\t\ttrElement.addClass('collapseRow');\n\t\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.find('button.arrowUp')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.ruleListContainer', customRuleListContainer).slideUp('slow', function(e) {\n\t\t\t\t\t\t\tcustomRuleListContainer.css('display', 'none');\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.find('button.arrowUp').addClass('d-none');\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.find('button.arrowDown')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\ttrElement.removeClass('collapseRow');\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getCustomRules(moduleName).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tthisInstance.showCustomRulesNextToElement(trElement, data);\n\t\t\t\t\telement.find('button.arrowDown').addClass('d-none');\n\t\t\t\t\telement\n\t\t\t\t\t\t.find('button.arrowUp')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.show();\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-add-custom-rule', function(e) {\n\t\t\t\tlet button = $(e.currentTarget);\n\t\t\t\tthisInstance.editCustomRule(button.data('url'));\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-edit', function(e) {\n\t\t\t\tlet editElement = $(e.currentTarget),\n\t\t\t\t\teditUrl = editElement.data('url');\n\t\t\t\tthisInstance.editCustomRule(editUrl);\n\t\t\t});\n\t\t\tcontentTable.on('click', '.js-delete', function(e) {\n\t\t\t\tlet deleteElement = $(e.currentTarget);\n\t\t\t\tthisInstance.deleteCustomRule(deleteElement);\n\t\t\t});\n\t\t\tcontentContainer.on('submit', '#js-edit-sharing-access', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = $(e.currentTarget),\n\t\t\t\t\tdata = form.serializeFormData();\n\t\t\t\tthisInstance.save(data).done(function(data) {\n\t\t\t\t\tcontentContainer.find('button:submit').addClass('d-none');\n\t\t\t\t\tthisInstance.registerSharingAccessEdit();\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NEW_SHARING_RULES_APPLIED_SUCCESSFULLY'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\n\n$(document).ready(function() {\n\tlet settingSharingAcessInstance = new Settings_Sharing_Access_Js();\n\tsettingSharingAcessInstance.registerEvents();\n});\n"],"names":["jQuery","Class","contentTable","contentsContainer","init","setContentTable","setContentContainer","element","getContentTable","getContentContainer","getCustomRuleContainerClassName","parentModuleName","showCustomRulesNextToElement","parentElement","rulesListElement","data","trElementForRuleList","moduleName","append","css","after","addClass","slideDown","getCustomRules","forModule","Deferred","params","app","getModuleName","getParentModuleName","AppConnector","request","done","aDeferred","resolve","fail","error","reject","promise","save","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","mode","saveCustomRule","form","serializeFormData","module","parent","action","result","response","success","hideModalWindow","$","val","thisInstance","loadCustomRulesList","Vtiger_Helper_Js","showPnotify","type","text","message","customRuleListContainer","find","html","editCustomRule","url","showModalWindow","modalContainer","on","e","preventDefault","currentTarget","formElement","deleteCustomRule","deleteElement","currentRow","closest","vtranslate","showConfirmationBox","deleteUrl","fadeOut","nextRows","nextAll","length","each","i","updatedNumber","parseInt","currentSequenceElement","remove","customRuleTable","removeClass","registerSharingAccessEdit","contentContainer","one","registerDependentModulesPrivilegesChange","container","modulesList","JSON","parse","dependentList","dependentPrivilege","is","bootbox","alert","index","attr","registerEvents","trElement","isHidden","show","slideUp","button","editUrl","editElement","document","ready","settingSharingAcessInstance"],"mappings":"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"}