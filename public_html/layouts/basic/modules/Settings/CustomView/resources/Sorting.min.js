'use strict';

var defineProperty = function (obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
};

jQuery.Class('Settings_CustomView_Sorting_Js',{},{formElement:!1,/**
	 * Register events for buttons in form
	 */registerButtonsEvent:function registerButtonsEvent(){var thisInstance=this,form=this.getForm();form.find('.js-clear').on('click',function(e){var currentTarget=jQuery(e.currentTarget);currentTarget.closest('.js-sort-container').find('[name="defaultOrderBy"]').val('').trigger('change');}),form.find('.js-sort-order-button').on('click',function(e){var currentTarget=jQuery(e.currentTarget);currentTarget.find('.fas').each(function(){jQuery(this).hasClass('d-none')?(jQuery(this).removeClass('d-none'),form.find('[name="sortOrder"]').val(jQuery(this).data('val'))):jQuery(this).addClass('d-none');});}),form.on('submit',function(e){e.preventDefault();var form=jQuery(e.currentTarget);thisInstance.saveSorting(form);});},/**
	 * Saves sort the filter
	 * @param {jQuery} form
	 */saveSorting:function saveSorting(form){var progress=$.progressIndicator({message:app.vtranslate('JS_SAVE_LOADER_INFO'),blockInfo:{enabled:!0}}),data=form.serializeFormData(),params={cvid:data.cvid,name:'sort',value:data.defaultOrderBy?JSON.stringify(defineProperty({},data.defaultOrderBy,data.sortOrder)):''};app.saveAjax('updateField',{},params).done(function(data){app.hideModalWindow(),data.success&&Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),progress.progressIndicator({mode:'hide'});});},/**
	 * Returns form as jQuery object
	 * @returns {jQuery}
	 */getForm:function getForm(){return !1===this.formElement&&this.setForm(jQuery('#js-sorting-filter')),this.formElement},setForm:function setForm(element){return this.formElement=element,this},registerEvents:function registerEvents(){this.registerButtonsEvent();}}),jQuery(document).ready(function(){var instance=new Settings_CustomView_Sorting_Js;instance.registerEvents();});
//# sourceMappingURL=Sorting.min.js.map
