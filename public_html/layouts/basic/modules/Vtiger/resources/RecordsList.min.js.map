{"version":3,"file":"RecordsList.min.js","sources":["RecordsList.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_RecordsList_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * List search instance\n\t\t */\n\t\tlistSearchInstance: false,\n\t\t/**\n\t\t * Module name\n\t\t */\n\t\tmoduleName: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function(cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Get params for record list\n\t\t * @returns {{module: string, view: string, src_module: string, src_record: int, src_field: string, related_parent_module: string, related_parent_id: int|string, page: int, orderby: string, sortorder: string, multi_select: boolean, totalCount: int|string, noOfEntries: int, onlyBody: boolean}}\n\t\t */\n\t\tgetParams: function() {\n\t\t\tlet params = {\n\t\t\t\tmodule: this.moduleName,\n\t\t\t\tview: this.container.data('view'),\n\t\t\t\tsrc_module: this.container.find('.js-parent-module').val(),\n\t\t\t\tsrc_record: this.container.find('.js-source-record').val(),\n\t\t\t\tsrc_field: this.container.find('.js-source-field').val(),\n\t\t\t\trelated_parent_module: this.container.find('.js-related-parent-module').val(),\n\t\t\t\trelated_parent_id: this.container.find('.js-related-parent-id').val(),\n\t\t\t\tpage: this.container.find('.js-page-number').val(),\n\t\t\t\torderby: this.container.find('.js-order-by').val(),\n\t\t\t\tsortorder: this.container.find('.js-sort-order').val(),\n\t\t\t\tmulti_select: this.container.find('.js-multi-select').val(),\n\t\t\t\ttotalCount: this.container.find('.js-total-count').val(),\n\t\t\t\tnoOfEntries: this.container.find('.js-no-entries').val(),\n\t\t\t\tfilterFields: JSON.parse(this.container.find('.js-filter-fields').val()),\n\t\t\t\tonlyBody: true\n\t\t\t};\n\t\t\tlet searchValue = this.listSearchInstance.getAlphabetSearchValue();\n\t\t\tparams['search_params'] = JSON.stringify(this.listSearchInstance.getListSearchParams(true));\n\t\t\tif (typeof searchValue !== 'undefined' && searchValue.length > 0) {\n\t\t\t\tparams['search_key'] = this.listSearchInstance.getAlphabetSearchField();\n\t\t\t\tparams['search_value'] = searchValue;\n\t\t\t\tparams['operator'] = 's';\n\t\t\t}\n\t\t\treturn params;\n\t\t},\n\t\t/**\n\t\t * Load records list\n\t\t * @param {object} params\n\t\t * @returns {*}\n\t\t */\n\t\tloadRecordList: function(params) {\n\t\t\tconst body = this.container.find('.js-modal-body');\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tconst progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\telementToBlock: body\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request($.extend(this.getParams(), params))\n\t\t\t\t.done(responseData => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tbody.html($(responseData).html());\n\t\t\t\t\tthis.registerBasicEvents();\n\t\t\t\t\taDeferred.resolve(responseData);\n\t\t\t\t})\n\t\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOT_ALLOWED_VALUE'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * Register the click event for listView headers\n\t\t */\n\t\tregisterHeadersClickEvent: function() {\n\t\t\tYetiForce_ListSearch_Js.registerSearch(this.container, (data) => {\n\t\t\t\tthis.loadRecordList(data);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Update record pagination\n\t\t * @param {boolean} countNumberRecords\n\t\t */\n\t\tupdatePagination: function(countNumberRecords) {\n\t\t\tlet params = this.getParams();\n\t\t\tparams['mode'] = 'getPagination';\n\t\t\tif (countNumberRecords) {\n\t\t\t\tparams['showTotalCount'] = true;\n\t\t\t}\n\t\t\tAppConnector.request(params).done(responseData => {\n\t\t\t\tthis.container.find('.js-pagination-container').html(responseData);\n\t\t\t\tlet totalCount = this.container.find('.js-pagination-list').data('totalCount');\n\t\t\t\tif (totalCount) {\n\t\t\t\t\tthis.container.find('.js-total-count').val(totalCount);\n\t\t\t\t}\n\t\t\t\tthis.registerPaginationEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register pagination events\n\t\t */\n\t\tregisterPaginationEvents: function() {\n\t\t\tconst self = this;\n\t\t\tthis.container.find('.js-next-page').on('click', function() {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (self.container.find('.js-no-entries').val() == self.container.find('.js-page-limit').val()) {\n\t\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\t\tlet nextPageNumber = parseInt(parseFloat(pageNumber.val())) + 1;\n\t\t\t\t\tpageNumber.val(nextPageNumber);\n\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-page--previous').on('click', function() {\n\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\tif (pageNumber.val() > 1) {\n\t\t\t\t\tlet nextPageNumber = parseInt(parseFloat(pageNumber.val())) - 1;\n\t\t\t\t\tpageNumber.val(nextPageNumber);\n\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-page--set').on('click', function() {\n\t\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself.container.find('.js-page-number').val($(this).data('id'));\n\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\tself.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.container.find('.js-count-number-records').on('click', function() {\n\t\t\t\tapp.hidePopover($(this));\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_GET_PAGINATION_INFO'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tself.updatePagination(true);\n\t\t\t});\n\t\t\tthis.container\n\t\t\t\t.find('.js-page--jump-drop-down')\n\t\t\t\t.on('click', 'li', function(e) {\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t})\n\t\t\t\t.on('keypress', '.js-page-jump', function(e) {\n\t\t\t\t\tif (e.which == 13) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tconst element = $(this);\n\t\t\t\t\t\tconst response = Vtiger_WholeNumberGreaterThanZero_Validator_Js.invokeValidation(element);\n\t\t\t\t\t\tif (typeof response !== 'undefined') {\n\t\t\t\t\t\t\telement.validationEngine('showPrompt', response, '', 'topLeft', true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.validationEngine('hideAll');\n\t\t\t\t\t\t\tlet pageNumber = self.container.find('.js-page-number');\n\t\t\t\t\t\t\tlet currentPageNumber = pageNumber.val();\n\t\t\t\t\t\t\tlet newPageNumber = parseInt($(this).val());\n\t\t\t\t\t\t\tvar totalPages = parseInt(self.container.find('.js-page--total').text());\n\t\t\t\t\t\t\tif (newPageNumber > totalPages) {\n\t\t\t\t\t\t\t\tvar error = app.vtranslate('JS_PAGE_NOT_EXIST');\n\t\t\t\t\t\t\t\telement.validationEngine('showPrompt', error, '', 'topLeft', true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (newPageNumber == currentPageNumber) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_YOU_ARE_IN_PAGE_NUMBER') + ' ' + newPageNumber,\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpageNumber.val(newPageNumber);\n\t\t\t\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register list search\n\t\t */\n\t\tregisterListSearch: function() {\n\t\t\tthis.listSearchInstance = YetiForce_ListSearch_Js.getInstance(this.container, false, this, this.moduleName);\n\t\t\tthis.listSearchInstance.setViewName('RecordsList');\n\t\t},\n\t\t/**\n\t\t * Register list events\n\t\t */\n\t\tregisterListEvents: function() {\n\t\t\tconst self = this;\n\t\t\tlet additional = this.container.find('.js-additional-informations').val() == 1;\n\t\t\tself.container.on('click', '.js-select-row', function(e) {\n\t\t\t\tif ($(e.target).hasClass('js-select-checkbox') || $(e.target).hasClass('u-cursor-auto')) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tlet data = $(this).data();\n\t\t\t\tif (self.container.find('.js-multi-select').val() === 'true') {\n\t\t\t\t\tlet selected = {};\n\t\t\t\t\tif (additional) {\n\t\t\t\t\t\tselected[data.id] = [];\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.find('td[data-field]')\n\t\t\t\t\t\t\t.each(function(index, field) {\n\t\t\t\t\t\t\t\tfield = $(field);\n\t\t\t\t\t\t\t\tselected[data.id].push({\n\t\t\t\t\t\t\t\t\tvalue: field.text(),\n\t\t\t\t\t\t\t\t\tfield: field.data('field'),\n\t\t\t\t\t\t\t\t\ttype: field.data('type')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected[data.id] = data.name;\n\t\t\t\t\t}\n\t\t\t\t\tself.selectEvent(selected, e);\n\t\t\t\t} else {\n\t\t\t\t\tself.selectEvent(data, e);\n\t\t\t\t}\n\n\t\t\t\tapp.hideModalWindow(false, self.container.parent().attr('id'));\n\t\t\t});\n\t\t\tself.container.on('click', '.js-selected-rows', function(e) {\n\t\t\t\tlet selected = {};\n\t\t\t\tself.container.find('table tr.js-select-row .js-select-checkbox').each(function(index, element) {\n\t\t\t\t\telement = $(element);\n\t\t\t\t\tif (!element.is(':checked')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet data = element.closest('tr').data();\n\t\t\t\t\tif (additional) {\n\t\t\t\t\t\tselected[data.id] = [];\n\t\t\t\t\t\telement\n\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t.find('td[data-field]')\n\t\t\t\t\t\t\t.each(function(index, field) {\n\t\t\t\t\t\t\t\tfield = $(field);\n\t\t\t\t\t\t\t\tselected[data.id].push({\n\t\t\t\t\t\t\t\t\tvalue: field.text(),\n\t\t\t\t\t\t\t\t\tfield: field.data('field'),\n\t\t\t\t\t\t\t\t\ttype: field.data('type')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected[data.id] = data.name;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (Object.keys(selected).length <= 0) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_SELECT_ONE_RECORD')\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tself.selectEvent(selected, e);\n\t\t\t\t\tapp.hideModalWindow($(e.target).closest('.js-modal-container'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.container.on('change', '.js-hierarchy-records', function() {\n\t\t\t\tself.container.find('.js-related-parent-id').val(this.value);\n\t\t\t\tself.container.find('.js-total-count').val('');\n\t\t\t\tself.container.find('.js-page-number').val(1);\n\t\t\t\tself.loadRecordList().done(function() {\n\t\t\t\t\tself.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t\tself.container.on('click', '.js-select-checkbox', function(e) {\n\t\t\t\tlet parentElem, element;\n\t\t\t\tparentElem = element = $(this);\n\t\t\t\tif (element.data('type') === 'all') {\n\t\t\t\t\tparentElem = element.closest('table').find('.js-select-checkbox[data-type=\"row\"]');\n\t\t\t\t}\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tparentElem\n\t\t\t\t\t\t.prop('checked', true)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.addClass('highlightBackgroundColor');\n\t\t\t\t} else {\n\t\t\t\t\tparentElem\n\t\t\t\t\t\t.prop('checked', false)\n\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t.removeClass('highlightBackgroundColor');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register modal basic events\n\t\t */\n\t\tregisterBasicEvents: function() {\n\t\t\tthis.registerListSearch();\n\t\t\tthis.registerPaginationEvents();\n\t\t},\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.moduleName = this.container.data('module');\n\t\t\tthis.registerBasicEvents();\n\t\t\tthis.registerListEvents();\n\t\t\tthis.registerHeadersClickEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","selectEvent","listSearchInstance","moduleName","container","setSelectEvent","cb","getParams","module","view","data","src_module","find","val","src_record","src_field","related_parent_module","related_parent_id","page","orderby","sortorder","multi_select","totalCount","noOfEntries","filterFields","JSON","parse","onlyBody","searchValue","getAlphabetSearchValue","stringify","getListSearchParams","length","params","getAlphabetSearchField","loadRecordList","body","aDeferred","Deferred","progressIndicatorElement","progressIndicator","blockInfo","enabled","elementToBlock","request","extend","done","mode","html","responseData","registerBasicEvents","resolve","fail","textStatus","errorThrown","reject","Vtiger_Helper_Js","showPnotify","text","app","vtranslate","type","promise","registerHeadersClickEvent","YetiForce_ListSearch_Js","registerSearch","updatePagination","countNumberRecords","AppConnector","registerPaginationEvents","on","hasClass","self","nextPageNumber","parseInt","parseFloat","pageNumber","hidePopover","showMessage","title","e","stopImmediatePropagation","which","response","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","element","validationEngine","currentPageNumber","newPageNumber","totalPages","error","registerListSearch","getInstance","setViewName","registerListEvents","additional","target","selected","id","closest","each","index","field","push","value","name","hideModalWindow","parent","attr","is","keys","parentElem","prop","addClass","removeClass","registerEvents","modalContainer"],"mappings":"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"}