{"version":3,"file":"Calendar.min.js","sources":["Calendar.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/** Class representing a calendar. */\nwindow.Calendar_Js = class {\n\t/**\n\t * Create calendar's options.\n\t * @param {jQuery} container\n\t * @param {bool} readonly\n\t */\n\tconstructor(container = $('.js-base-container'), readonly = false, browserHistory = true) {\n\t\tthis.calendarView = false;\n\t\tthis.calendarCreateView = false;\n\t\tthis.container = container;\n\t\tthis.readonly = readonly;\n\t\tthis.eventCreate = app.getMainParams('eventCreate');\n\t\tthis.eventEdit = app.getMainParams('eventEdit');\n\t\tthis.browserHistory = !readonly && browserHistory\n\t\tthis.browserHistoryConfig = this.browserHistory ? {} : this.setBrowserHistoryOptions();\n\t\tthis.calendarOptions = this.setCalendarOptions();\n\t\tthis.eventTypeKeyName = false;\n\t\tthis.module = app.getModuleName();\n\t}\n\n\t/**\n\t * Set calendar's options.\n\t * @returns {object}\n\t */\n\tsetCalendarOptions() {\n\t\treturn Object.assign(\n\t\t\tthis.setCalendarBasicOptions(),\n\t\t\tthis.setCalendarAdvancedOptions(),\n\t\t\tthis.setCalendarModuleOptions(),\n\t\t\tthis.browserHistoryConfig\n\t\t);\n\t}\n\n\t/**\n\t * Set calendar's basic options.\n\t * @returns {object}\n\t */\n\tsetCalendarBasicOptions() {\n\t\tlet eventLimit = app.getMainParams('eventLimit'),\n\t\t\tuserDefaultActivityView = app.getMainParams('activity_view'),\n\t\t\tdefaultView = app.moduleCacheGet('defaultView'),\n\t\t\tuserDefaultTimeFormat = CONFIG.hourFormat;\n\t\tif (eventLimit == 'true') {\n\t\t\teventLimit = true;\n\t\t} else if (eventLimit == 'false') {\n\t\t\teventLimit = false;\n\t\t} else {\n\t\t\teventLimit = parseInt(eventLimit) + 1;\n\t\t}\n\t\tif (userDefaultActivityView === 'Today') {\n\t\t\tuserDefaultActivityView = app.getMainParams('dayView');\n\t\t} else if (userDefaultActivityView === 'This Week') {\n\t\t\tuserDefaultActivityView = app.getMainParams('weekView');\n\t\t} else {\n\t\t\tuserDefaultActivityView = 'month';\n\t\t}\n\t\tif (defaultView != null) {\n\t\t\tuserDefaultActivityView = defaultView;\n\t\t}\n\t\tif (userDefaultTimeFormat == 24) {\n\t\t\tuserDefaultTimeFormat = 'H:mm';\n\t\t} else {\n\t\t\tuserDefaultTimeFormat = 'h:mmt';\n\t\t}\n\t\tlet options = {\n\t\t\ttimeFormat: userDefaultTimeFormat,\n\t\t\tslotLabelFormat: userDefaultTimeFormat,\n\t\t\tdefaultView: userDefaultActivityView,\n\t\t\tslotMinutes: 15,\n\t\t\tdefaultEventMinutes: 0,\n\t\t\tforceEventDuration: true,\n\t\t\tdefaultTimedEventDuration: '01:00:00',\n\t\t\teventLimit: eventLimit,\n\t\t\teventLimitText: app.vtranslate('JS_MORE'),\n\t\t\tselectHelper: true,\n\t\t\tscrollTime: app.getMainParams('startHour') + ':00',\n\t\t\tmonthNamesShort: [\n\t\t\t\tapp.vtranslate('JS_JAN'),\n\t\t\t\tapp.vtranslate('JS_FEB'),\n\t\t\t\tapp.vtranslate('JS_MAR'),\n\t\t\t\tapp.vtranslate('JS_APR'),\n\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\tapp.vtranslate('JS_JUN'),\n\t\t\t\tapp.vtranslate('JS_JUL'),\n\t\t\t\tapp.vtranslate('JS_AUG'),\n\t\t\t\tapp.vtranslate('JS_SEP'),\n\t\t\t\tapp.vtranslate('JS_OCT'),\n\t\t\t\tapp.vtranslate('JS_NOV'),\n\t\t\t\tapp.vtranslate('JS_DEC')\n\t\t\t],\n\t\t\tdayNames: [\n\t\t\t\tapp.vtranslate('JS_SUNDAY'),\n\t\t\t\tapp.vtranslate('JS_MONDAY'),\n\t\t\t\tapp.vtranslate('JS_TUESDAY'),\n\t\t\t\tapp.vtranslate('JS_WEDNESDAY'),\n\t\t\t\tapp.vtranslate('JS_THURSDAY'),\n\t\t\t\tapp.vtranslate('JS_FRIDAY'),\n\t\t\t\tapp.vtranslate('JS_SATURDAY')\n\t\t\t],\n\t\t\tbuttonText: {\n\t\t\t\ttoday: app.vtranslate('JS_CURRENT'),\n\t\t\t\tyear: app.vtranslate('JS_YEAR'),\n\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\tday: app.vtranslate('JS_DAY')\n\t\t\t},\n\t\t\tallDayText: app.vtranslate('JS_ALL_DAY')\n\t\t};\n\t\tif (app.moduleCacheGet('start') !== null) {\n\t\t\tlet s = moment(app.moduleCacheGet('start')).valueOf();\n\t\t\tlet e = moment(app.moduleCacheGet('end')).valueOf();\n\t\t\toptions.defaultDate = moment(moment(s + (e - s) / 2).format('YYYY-MM-DD'));\n\t\t}\n\t\treturn Object.assign(this.setCalendarMinimalOptions(), options);\n\t}\n\n\t/**\n\t * Converts the date format.\n\t * @param {string} partOfDate\n\t */\n\tparseDateFormat(partOfDate) {\n\t\tlet parseMonthFormat = {\n\t\t\t'yyyy-mm-dd': 'YYYY-MMMM',\n\t\t\t'mm-dd-yyyy': 'MMMM-YYYY',\n\t\t\t'dd-mm-yyyy': 'MMMM-YYYY',\n\t\t\t'yyyy.mm.dd': 'YYYY.MMMM',\n\t\t\t'mm.dd.yyyy': 'MMMM.YYYY',\n\t\t\t'dd.mm.yyyy': 'MMMM.YYYY',\n\t\t\t'yyyy/mm/dd': 'YYYY/MMMM',\n\t\t\t'mm/dd/yyyy': 'MMMM/YYYY',\n\t\t\t'dd/mm/yyyy': 'MMMM/YYYY'\n\t\t};\n\t\tlet parseWeekAndDayFormat = {\n\t\t\t'yyyy-mm-dd': 'YYYY-MMM-D',\n\t\t\t'mm-dd-yyyy': 'MMM-D-YYYY',\n\t\t\t'dd-mm-yyyy': 'D-MMM-YYYY',\n\t\t\t'yyyy.mm.dd': 'YYYY.MMM.D',\n\t\t\t'mm.dd.yyyy': 'MMM.D.YYYY',\n\t\t\t'dd.mm.yyyy': 'D.MMM.YYYY',\n\t\t\t'yyyy/mm/dd': 'YYYY/MMM/D',\n\t\t\t'mm/dd/yyyy': 'MMM/D/YYYY',\n\t\t\t'dd/mm/yyyy': 'D/MMM/YYYY'\n\t\t};\n\t\tlet formatDate = CONFIG.dateFormat;\n\t\tswitch (partOfDate) {\n\t\t\tcase 'month':\n\t\t\t\treturn parseMonthFormat[formatDate];\n\t\t\t\tbreak;\n\t\t\tcase 'week':\n\t\t\t\treturn parseWeekAndDayFormat[formatDate];\n\t\t\t\tbreak;\n\t\t\tcase 'day':\n\t\t\t\treturn parseWeekAndDayFormat[formatDate];\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Set calendar's minimal options.\n\t * @returns {object}\n\t */\n\tsetCalendarMinimalOptions() {\n\t\tlet hiddenDays = [];\n\t\tif (app.getMainParams('switchingDays') === 'workDays') {\n\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t}\n\t\treturn {\n\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\tselectable: true,\n\t\t\thiddenDays: hiddenDays,\n\t\t\tmonthNames: [\n\t\t\t\tapp.vtranslate('JS_JANUARY'),\n\t\t\t\tapp.vtranslate('JS_FEBRUARY'),\n\t\t\t\tapp.vtranslate('JS_MARCH'),\n\t\t\t\tapp.vtranslate('JS_APRIL'),\n\t\t\t\tapp.vtranslate('JS_MAY'),\n\t\t\t\tapp.vtranslate('JS_JUNE'),\n\t\t\t\tapp.vtranslate('JS_JULY'),\n\t\t\t\tapp.vtranslate('JS_AUGUST'),\n\t\t\t\tapp.vtranslate('JS_SEPTEMBER'),\n\t\t\t\tapp.vtranslate('JS_OCTOBER'),\n\t\t\t\tapp.vtranslate('JS_NOVEMBER'),\n\t\t\t\tapp.vtranslate('JS_DECEMBER')\n\t\t\t],\n\t\t\tdayNamesShort: [\n\t\t\t\tapp.vtranslate('JS_SUN'),\n\t\t\t\tapp.vtranslate('JS_MON'),\n\t\t\t\tapp.vtranslate('JS_TUE'),\n\t\t\t\tapp.vtranslate('JS_WED'),\n\t\t\t\tapp.vtranslate('JS_THU'),\n\t\t\t\tapp.vtranslate('JS_FRI'),\n\t\t\t\tapp.vtranslate('JS_SAT')\n\t\t\t]\n\t\t};\n\t}\n\n\t/**\n\t * Set calendar's advanced options.\n\t * @returns {object}\n\t */\n\tsetCalendarAdvancedOptions() {\n\t\tlet self = this;\n\t\treturn {\n\t\t\teditable: !this.readonly && this.eventEdit,\n\t\t\tselectable: !this.readonly && this.eventCreate,\n\t\t\theader: {\n\t\t\t\tleft: 'month,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\tcenter: 'title today',\n\t\t\t\tright: 'prev,next'\n\t\t\t},\n\t\t\tallDaySlot: app.getMainParams('allDaySlot'),\n\t\t\tviews: {\n\t\t\t\tbasic: {\n\t\t\t\t\teventLimit: false\n\t\t\t\t},\n\t\t\t\tmonth: {\n\t\t\t\t\ttitleFormat: this.parseDateFormat('month')\n\t\t\t\t},\n\t\t\t\tweek: {\n\t\t\t\t\ttitleFormat: this.parseDateFormat('week')\n\t\t\t\t},\n\t\t\t\tday: {\n\t\t\t\t\ttitleFormat: this.parseDateFormat('day')\n\t\t\t\t}\n\t\t\t},\n\t\t\teventDrop: function(event, delta, revertFunc) {\n\t\t\t\tself.updateEvent(event, delta, revertFunc);\n\t\t\t},\n\t\t\teventResize: function(event, delta, revertFunc) {\n\t\t\t\tself.updateEvent(event, delta, revertFunc);\n\t\t\t},\n\t\t\tviewRender: function() {\n\t\t\t\tself.loadCalendarData();\n\t\t\t},\n\t\t\teventRender: self.eventRenderer,\n\t\t\theight: this.setCalendarHeight(this.container)\n\t\t};\n\t}\n\n\t/**\n\t * Update calendar's event.\n\t * @param {Object} event\n\t * @param {Object} delta\n\t * @param {Object} revertFunc\n\t */\n\tupdateEvent(event, delta, revertFunc) {\n\t\tlet progressInstance = jQuery.progressIndicator({ blockInfo: { enabled: true } });\n\t\tlet start = event.start.format();\n\t\tlet params = {\n\t\t\tmodule: CONFIG.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'updateEvent',\n\t\t\tid: event.id,\n\t\t\tstart: start,\n\t\t\tdelta: delta._data,\n\t\t\tallDay: event.allDay\n\t\t};\n\t\tAppConnector.request(params)\n\t\t\t.done(function(response) {\n\t\t\t\tif (!response['result']) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_NO_EDIT_PERMISSION'));\n\t\t\t\t\trevertFunc();\n\t\t\t\t} else {\n\t\t\t\t\twindow.popoverCache = {};\n\t\t\t\t}\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t})\n\t\t\t.fail(function() {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_NO_EDIT_PERMISSION'));\n\t\t\t\trevertFunc();\n\t\t\t});\n\t}\n\n\t/**\n\t * Render event.\n\t * @param {Object} event\n\t * @param {jQuery} element\n\t */\n\teventRenderer(event, element) {\n\t\telement.find('.fc-title').html(event.title);\n\t\tif (event.rendering === 'background') {\n\t\t\telement.append(\n\t\t\t\t`<span class=\"js-popover-text d-block\"><span class=\"${event.icon} js-popover-icon mr-1\"></span>${event.title}</span>`\n\t\t\t);\n\t\t\telement.addClass('js-popover-tooltip--ellipsis').attr('data-content', event.title);\n\t\t\tapp.registerPopoverEllipsis({ element });\n\t\t}\n\t}\n\n\t/**\n\t * Returns counted calendar height.\n\t * @returns {(number|string)}\n\t */\n\tsetCalendarHeight() {\n\t\tconst defaultHeightValue = 'auto';\n\t\tif ($(window).width() > 993) {\n\t\t\tlet calendarContainer = this.container.find('.js-calendar__container'),\n\t\t\t\tcalendarPadding;\n\t\t\tif (this.container.hasClass('js-modal-container')) {\n\t\t\t\tcalendarPadding = this.container.find('.js-modal-header').outerHeight(); // modal needs bigger padding to prevent modal's scrollbar\n\t\t\t} else {\n\t\t\t\tcalendarPadding = this.container\n\t\t\t\t\t.find('.js-contents-div')\n\t\t\t\t\t.css('margin-left')\n\t\t\t\t\t.replace('px', ''); //equals calendar padding bottom to left margin\n\t\t\t}\n\t\t\tlet setCalendarH = () => {\n\t\t\t\treturn (\n\t\t\t\t\t$(window).height() -\n\t\t\t\t\tthis.container.find('.js-calendar__container').offset().top -\n\t\t\t\t\t$('.js-footer').height() -\n\t\t\t\t\tcalendarPadding\n\t\t\t\t);\n\t\t\t};\n\t\t\tnew ResizeSensor(this.container.find('.contentsDiv'), () => {\n\t\t\t\tcalendarContainer.fullCalendar('option', 'height', setCalendarH());\n\t\t\t});\n\t\t}\n\t\treturn defaultHeightValue;\n\t}\n\n\t/**\n\t * Set calendar module's options.\n\t * @returns {object}\n\t */\n\tsetCalendarModuleOptions() {\n\t\treturn {};\n\t}\n\n\t/**\n\t * Set calendar options from browser history.\n\t * @returns {object}\n\t */\n\tsetBrowserHistoryOptions() {\n\t\tlet historyParams = app.getMainParams('historyParams', true),\n\t\t\toptions = null;\n\t\tif (historyParams && (historyParams.length || Object.keys(historyParams).length)) {\n\t\t\toptions = {\n\t\t\t\tstart: historyParams.start,\n\t\t\t\tend: historyParams.end,\n\t\t\t\tuser: historyParams.user.split(',').map(x => {\n\t\t\t\t\treturn parseInt(x);\n\t\t\t\t}),\n\t\t\t\ttime: historyParams.time,\n\t\t\t\thiddenDays: historyParams.hiddenDays.split(',').map(x => {\n\t\t\t\t\tlet parsedValue = parseInt(x);\n\t\t\t\t\treturn isNaN(parsedValue) ? '' : parsedValue;\n\t\t\t\t}),\n\t\t\t\tcvid: historyParams.cvid,\n\t\t\t\tdefaultView: historyParams.viewType\n\t\t\t};\n\t\t\tlet dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tlet s = moment(options.start, dateFormat).valueOf();\n\t\t\tlet e = moment(options.end, dateFormat).valueOf();\n\t\t\toptions.defaultDate = moment(moment(s + (e - s) / 2).format('YYYY-MM-DD'));\n\t\t\tObject.keys(options).forEach(key => options[key] === 'undefined' && delete options[key]);\n\t\t\tapp.moduleCacheSet('browserHistoryEvent', false);\n\t\t\tapp.setMainParams('showType', options.time);\n\t\t\tapp.setMainParams('usersId', options.user);\n\t\t\tapp.setMainParams('defaultView', options.defaultView);\n\t\t}\n\t\twindow.addEventListener(\n\t\t\t'popstate',\n\t\t\tfunction(event) {\n\t\t\t\tapp.moduleCacheSet('browserHistoryEvent', true);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t\treturn options;\n\t}\n\n\t/**\n\t * Register events.\n\t * @returns {object}\n\t */\n\tregisterEvents() {\n\t\tthis.renderCalendar();\n\t\tthis.registerSitebarEvents();\n\t\tthis.registerButtonSelectAll();\n\t\tthis.registerAddButton();\n\t}\n\n\t/**\n\t * Invokes fullcalendar with options.\n\t */\n\trenderCalendar() {\n\t\tthis.getCalendarView().fullCalendar(this.calendarOptions);\n\t}\n\n\t/**\n\t * Register sitebar events.\n\t */\n\tregisterSitebarEvents() {\n\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', () => {\n\t\t\tthis.registerSelect2Event();\n\t\t});\n\t}\n\n\t/**\n\t * Load calendar data\n\t */\n\tloadCalendarData() {\n\t\tconst defaultParams = this.getDefaultParams();\n\t\tthis.getCalendarView().fullCalendar('removeEvents');\n\t\tif (!defaultParams.emptyFilters) {\n\t\t\tconst progressInstance = $.progressIndicator();\n\t\t\tAppConnector.request(defaultParams).done(events => {\n\t\t\t\tthis.getCalendarView().fullCalendar('addEventSource', events.result);\n\t\t\t\tprogressInstance.hide();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Default params\n\t * @returns {{module: *, action: string, mode: string, start: *, end: *, user: *, emptyFilters: boolean}}\n\t */\n\tgetDefaultParams() {\n\t\tlet formatDate = CONFIG.dateFormat.toUpperCase(),\n\t\t\tview = this.getCalendarView().fullCalendar('getView'),\n\t\t\tusers = app.moduleCacheGet('calendar-users') || CONFIG.userId;\n\t\tlet params = {\n\t\t\tmodule: CONFIG.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'getEvents',\n\t\t\tstart: view.start.format(formatDate),\n\t\t\tend: view.end.format(formatDate),\n\t\t\tuser: users,\n\t\t\temptyFilters: users.length === 0\n\t\t};\n\t\tif (app.moduleCacheGet('calendar-types')) {\n\t\t\tparams.types = app.moduleCacheGet('calendar-types');\n\t\t\tparams.emptyFilters = users.length === 0 || params.types.length === 0;\n\t\t} else {\n\t\t\tparams.types = [];\n\t\t}\n\t\treturn params;\n\t}\n\n\t/**\n\t * Register select2 event.\n\t */\n\tregisterSelect2Event() {\n\t\tlet self = this;\n\t\t$('.siteBarRight .js-calendar__filter__select').each(function() {\n\t\t\tlet element = $(this);\n\t\t\tlet name = element.data('cache');\n\t\t\tlet cachedValue = app.moduleCacheGet(name);\n\t\t\tif (element.length > 0 && cachedValue !== undefined) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(cachedValue);\n\t\t\t\t}\n\t\t\t} else if (element.length > 0 && cachedValue === undefined && !element.find(':selected').length) {\n\t\t\t\tlet allOptions = [];\n\t\t\t\telement.find('option').each((i, option) => {\n\t\t\t\t\tallOptions.push($(option).val());\n\t\t\t\t});\n\t\t\t\telement.val(allOptions);\n\t\t\t\tapp.moduleCacheSet(name, cachedValue);\n\t\t\t}\n\t\t});\n\t\tlet selectsElements = $('.siteBarRight .select2, .siteBarRight .filterField');\n\t\tselectsElements.off('change');\n\t\tApp.Fields.Picklist.showSelect2ElementView(selectsElements);\n\t\tselectsElements.on('change', function() {\n\t\t\tlet element = $(this);\n\t\t\tlet value = element.val();\n\t\t\tif (value == null) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tvalue = element.is(':checked');\n\t\t\t}\n\t\t\tapp.moduleCacheSet(element.data('cache'), value);\n\t\t\tself.loadCalendarData();\n\t\t});\n\t}\n\n\t/**\n\t * Register button select all.\n\t */\n\tregisterButtonSelectAll() {\n\t\tlet selectBtn = $('.selectAllBtn');\n\t\tselectBtn.on('click', function(e) {\n\t\t\tlet selectAllLabel = $(this).find('.selectAll');\n\t\t\tlet deselectAllLabel = $(this).find('.deselectAll');\n\t\t\tif (selectAllLabel.hasClass('d-none')) {\n\t\t\t\tselectAllLabel.removeClass('d-none');\n\t\t\t\tdeselectAllLabel.addClass('d-none');\n\t\t\t\t$(this)\n\t\t\t\t\t.closest('.quickWidget')\n\t\t\t\t\t.find('select option')\n\t\t\t\t\t.prop('selected', false);\n\t\t\t} else {\n\t\t\t\t$(this)\n\t\t\t\t\t.closest('.quickWidget')\n\t\t\t\t\t.find('select option')\n\t\t\t\t\t.prop('selected', true);\n\t\t\t\tdeselectAllLabel.removeClass('d-none');\n\t\t\t\tselectAllLabel.addClass('d-none');\n\t\t\t}\n\t\t\t$(this)\n\t\t\t\t.closest('.quickWidget')\n\t\t\t\t.find('select')\n\t\t\t\t.trigger('change');\n\t\t});\n\t}\n\n\t/**\n\t * Register add button.\n\t */\n\tregisterAddButton() {\n\t\tconst self = this;\n\t\t$('.js-add').on('click', e => {\n\t\t\tself.getCalendarCreateView().done(data => {\n\t\t\t\tconst headerInstance = new Vtiger_Header_Js();\n\t\t\t\theaderInstance.handleQuickCreateData(data, {\n\t\t\t\t\tcallbackFunction: data => {\n\t\t\t\t\t\tself.addCalendarEvent(data.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Get calendar create view.\n\t * @returns {promise}\n\t */\n\tgetCalendarCreateView() {\n\t\tlet self = this;\n\t\tlet aDeferred = jQuery.Deferred();\n\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView.clone(true, true));\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tlet progressInstance = jQuery.progressIndicator();\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function(data) {\n\t\t\t\tprogressInstance.hide();\n\t\t\t\tself.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data.clone(true, true));\n\t\t\t})\n\t\t\t.fail(function() {\n\t\t\t\tprogressInstance.hide();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Load calendar create view.\n\t * @returns {promise}\n\t */\n\tloadCalendarCreateView() {\n\t\tlet aDeferred = jQuery.Deferred();\n\t\tlet moduleName = app.getModuleName();\n\t\tlet url = 'index.php?module=' + moduleName + '&view=QuickCreateAjax';\n\t\tlet headerInstance = Vtiger_Header_Js.getInstance();\n\t\theaderInstance\n\t\t\t.getQuickCreateForm(url, moduleName)\n\t\t\t.done(function(data) {\n\t\t\t\taDeferred.resolve(jQuery(data));\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Add event data to render.\n\t */\n\tgetEventRenderData(calendarDetails) {\n\t\tconst calendar = this.getCalendarView();\n\t\tconst eventObject = {\n\t\t\tid: calendarDetails._recordId,\n\t\t\ttitle: calendarDetails._recordLabel,\n\t\t\tstart: calendar\n\t\t\t\t.fullCalendar('moment', calendarDetails.date_start.value + ' ' + calendarDetails.time_start.value)\n\t\t\t\t.format(),\n\t\t\tend: calendar\n\t\t\t\t.fullCalendar('moment', calendarDetails.due_date.value + ' ' + calendarDetails.time_end.value)\n\t\t\t\t.format(),\n\t\t\tstart_display: calendarDetails.date_start.display_value + ' ' + calendarDetails.time_start.display_value,\n\t\t\tend_display: calendarDetails.due_date.display_value + ' ' + calendarDetails.time_end.display_value,\n\t\t\turl: `index.php?module=${CONFIG.module}&view=Detail&record=${calendarDetails._recordId}`,\n\t\t\tclassName: `js-popover-tooltip--record ownerCBg_${calendarDetails.assigned_user_id.value} picklistCBr_${\n\t\t\t\tCONFIG.module\n\t\t\t}_${\n\t\t\t\t$('.js-calendar__filter__select[data-cache=\"calendar-types\"]').length\n\t\t\t\t\t? this.eventTypeKeyName + '_' + calendarDetails[this.eventTypeKeyName]['value']\n\t\t\t\t\t: ''\n\t\t\t}`,\n\t\t\tallDay: typeof calendarDetails.allday === 'undefined' ? false : calendarDetails.allday.value == 'on'\n\t\t};\n\t\treturn eventObject;\n\t}\n\n\tisNewEventToDisplay(eventObject) {\n\t\tlet ownerSelects = $('.js-calendar__filter__select[data-cache=\"calendar-users\"]').add(\n\t\t\t$('.js-calendar__filter__select[data-cache=\"calendar-groups\"]')\n\t\t);\n\t\tif ($.inArray(eventObject.assigned_user_id.value, ownerSelects.val()) < 0) {\n\t\t\tthis.refreshFilterValues(eventObject, ownerSelects);\n\t\t\treturn false;\n\t\t}\n\t\tlet calendarTypes = $('.js-calendar__filter__select[data-cache=\"calendar-types\"]');\n\t\tif (calendarTypes.length) {\n\t\t\tif (!this.eventTypeKeyName) {\n\t\t\t\tthis.setEventTypeKey(eventObject);\n\t\t\t}\n\t\t\tif ($.inArray(eventObject[this.eventTypeKeyName]['value'], calendarTypes.val()) < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tsetEventTypeKey(eventObject) {\n\t\tlet self = this;\n\t\tObject.keys(eventObject).forEach(function(key, index) {\n\t\t\tif (key.endsWith('type')) {\n\t\t\t\t// there are different names for event types in modules\n\t\t\t\tself.eventTypeKeyName = key;\n\t\t\t}\n\t\t});\n\t}\n\n\trefreshFilterValues(eventObject, filtersValues) {\n\t\tif (CONFIG.searchShowOwnerOnlyInList) {\n\t\t\tlet allOptions = [];\n\t\t\tfiltersValues.find('option').each((i, option) => {\n\t\t\t\tallOptions.push($(option).val());\n\t\t\t});\n\t\t\tif ($.inArray(eventObject.assigned_user_id.value, allOptions) < 0) {\n\t\t\t\tAppConnector.request(`module=${CONFIG.module}&view=RightPanel&mode=getUsersList`).done(usersData => {\n\t\t\t\t\tlet filterUsers = $('.js-calendar__filter--users');\n\t\t\t\t\tlet filterGroups = $('.js-calendar__filter--groups');\n\t\t\t\t\tfilterUsers.html(usersData);\n\t\t\t\t\tif (usersData) {\n\t\t\t\t\t\tfilterUsers.closest('.js-toggle-panel').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tif (filterGroups.length) {\n\t\t\t\t\t\tAppConnector.request(`module=${CONFIG.module}&view=RightPanel&mode=getGroupsList`).done(\n\t\t\t\t\t\t\tgroupsData => {\n\t\t\t\t\t\t\t\tfilterGroups.html(groupsData);\n\t\t\t\t\t\t\t\tif (groupsData) {\n\t\t\t\t\t\t\t\t\tfilterGroups.closest('.js-toggle-panel').removeClass('d-none');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.registerSelect2Event();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.registerSelect2Event();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add calendar event.\n\t */\n\taddCalendarEvent(eventObject) {\n\t\tif (this.isNewEventToDisplay(eventObject)) {\n\t\t\tthis.getCalendarView().fullCalendar('renderEvent', this.getEventRenderData(eventObject));\n\t\t}\n\t}\n\n\t/**\n\t * Get calendar container.\n\t * @returns {(boolean|jQuery)}\n\t */\n\tgetCalendarView() {\n\t\tif (this.calendarView == false) {\n\t\t\tthis.calendarView = this.container.find('.js-calendar__container');\n\t\t}\n\t\treturn this.calendarView;\n\t}\n};\n\n/**\n *  Class representing a calendar with creating events by day click instead of selecting days.\n * @extends Calendar_Js\n */\nwindow.Calendar_Unselectable_Js = class extends Calendar_Js {\n\t/**\n\t * Set calendar module options.\n\t * @returns {{allDaySlot: boolean, dayClick: object, selectable: boolean}}\n\t */\n\tsetCalendarModuleOptions() {\n\t\tlet self = this;\n\t\treturn {\n\t\t\tallDaySlot: false,\n\t\t\tdayClick: this.eventCreate\n\t\t\t\t? function(date) {\n\t\t\t\t\t\tself.registerDayClickEvent(date.format());\n\t\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t  }\n\t\t\t\t: false,\n\t\t\tselectable: false\n\t\t};\n\t}\n\n\t/**\n\t * Register day click event.\n\t * @param {string} date\n\t */\n\tregisterDayClickEvent(date) {\n\t\tlet self = this;\n\t\tself.getCalendarCreateView().done(function(data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet dateFormat = data\n\t\t\t\t\t.find('[name=\"date_start\"]')\n\t\t\t\t\t.data('dateFormat')\n\t\t\t\t\t.toUpperCase(),\n\t\t\t\ttimeFormat = data.find('[name=\"time_start\"]').data('format'),\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t\t}\n\t\t\tlet startDateInstance = Date.parse(date);\n\t\t\tlet startDateString = moment(date).format(dateFormat);\n\t\t\tlet startTimeString = moment(date).format(defaultTimeFormat);\n\t\t\tlet endDateInstance = Date.parse(date);\n\t\t\tlet endDateString = moment(date).format(dateFormat);\n\n\t\t\tlet view = self.getCalendarView().fullCalendar('getView');\n\t\t\tlet endTimeString;\n\t\t\tif ('month' == view.name) {\n\t\t\t\tlet diffDays = parseInt((endDateInstance - startDateInstance) / (1000 * 60 * 60 * 24));\n\t\t\t\tif (diffDays > 1) {\n\t\t\t\t\tlet defaultFirstHour = app.getMainParams('startHour');\n\t\t\t\t\tlet explodedTime = defaultFirstHour.split(':');\n\t\t\t\t\tstartTimeString = explodedTime['0'];\n\t\t\t\t\tlet defaultLastHour = app.getMainParams('endHour');\n\t\t\t\t\texplodedTime = defaultLastHour.split(':');\n\t\t\t\t\tendTimeString = explodedTime['0'];\n\t\t\t\t} else {\n\t\t\t\t\tlet now = new Date();\n\t\t\t\t\tstartTimeString = moment(now).format(defaultTimeFormat);\n\t\t\t\t\tendTimeString = moment(now)\n\t\t\t\t\t\t.add(15, 'minutes')\n\t\t\t\t\t\t.format(defaultTimeFormat);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tendTimeString = moment(endDateInstance)\n\t\t\t\t\t.add(30, 'minutes')\n\t\t\t\t\t.format(defaultTimeFormat);\n\t\t\t}\n\t\t\tdata.find('[name=\"date_start\"]').val(startDateString);\n\t\t\tdata.find('[name=\"due_date\"]').val(endDateString);\n\t\t\tdata.find('[name=\"time_start\"]').val(startTimeString);\n\t\t\tdata.find('[name=\"time_end\"]').val(endTimeString);\n\n\t\t\tlet headerInstance = new Vtiger_Header_Js();\n\t\t\theaderInstance.handleQuickCreateData(data, {\n\t\t\t\tcallbackFunction(data) {\n\t\t\t\t\tself.addCalendarEvent(data.result, dateFormat);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n"],"names":["window","Calendar_Js","$","readonly","browserHistory","calendarView","calendarCreateView","container","eventCreate","app","getMainParams","eventEdit","browserHistoryConfig","setBrowserHistoryOptions","calendarOptions","setCalendarOptions","eventTypeKeyName","module","getModuleName","assign","setCalendarBasicOptions","setCalendarAdvancedOptions","setCalendarModuleOptions","userDefaultActivityView","defaultView","moduleCacheGet","userDefaultTimeFormat","CONFIG","hourFormat","eventLimit","parseInt","timeFormat","slotLabelFormat","slotMinutes","defaultEventMinutes","forceEventDuration","defaultTimedEventDuration","eventLimitText","vtranslate","selectHelper","scrollTime","monthNamesShort","dayNames","buttonText","today","year","month","week","day","allDayText","moment","valueOf","e","options","defaultDate","s","format","setCalendarMinimalOptions","partOfDate","formatDate","dateFormat","hiddenDays","firstDay","firstDayOfWeekNo","selectable","monthNames","dayNamesShort","editable","header","left","center","right","allDaySlot","views","basic","titleFormat","parseDateFormat","eventDrop","event","delta","revertFunc","self","updateEvent","eventResize","viewRender","loadCalendarData","eventRender","eventRenderer","height","setCalendarHeight","jQuery","progressIndicator","blockInfo","enabled","start","params","action","mode","id","_data","allDay","AppConnector","request","done","response","popoverCache","Vtiger_Helper_Js","showPnotify","progressInstance","fail","element","find","html","title","rendering","append","icon","addClass","attr","registerPopoverEllipsis","width","calendarContainer","calendarPadding","hasClass","outerHeight","css","replace","offset","top","fullCalendar","setCalendarH","historyParams","length","Object","keys","end","user","split","map","x","time","parsedValue","cvid","viewType","toUpperCase","forEach","key","moduleCacheSet","setMainParams","addEventListener","renderCalendar","registerSitebarEvents","registerButtonSelectAll","registerAddButton","getCalendarView","on","registerSelect2Event","defaultParams","getDefaultParams","emptyFilters","events","result","hide","view","users","userId","types","each","name","data","cachedValue","prop","val","i","option","allOptions","push","selectsElements","off","App","Fields","Picklist","showSelect2ElementView","value","is","selectBtn","deselectAllLabel","selectAllLabel","removeClass","closest","trigger","getCalendarCreateView","headerInstance","handleQuickCreateData","callbackFunction","addCalendarEvent","aDeferred","Deferred","resolve","clone","promise","loadCalendarCreateView","moduleName","Vtiger_Header_Js","getInstance","getQuickCreateForm","textStatus","errorThrown","reject","calendarDetails","eventObject","_recordId","_recordLabel","calendar","date_start","time_start","due_date","time_end","start_display","display_value","end_display","url","className","assigned_user_id","allday","add","inArray","ownerSelects","refreshFilterValues","calendarTypes","setEventTypeKey","endsWith","filtersValues","searchShowOwnerOnlyInList","filterGroups","filterUsers","usersData","groupsData","isNewEventToDisplay","getEventRenderData","Calendar_Unselectable_Js","dayClick","date","registerDayClickEvent","defaultTimeFormat","Date","parse","startDateString","startTimeString","endDateInstance","endDateString","endTimeString","startDateInstance","explodedTime","defaultFirstHour","defaultLastHour","now"],"mappings":"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"}